!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).MapboxDraw=e()}(this,(function(){"use strict";var t=function(t,e){var r={drag:[],click:[],mousemove:[],mousedown:[],mouseup:[],mouseout:[],keydown:[],keyup:[],touchstart:[],touchmove:[],touchend:[],tap:[]},n={on:function(t,e,n){if(void 0===r[t])throw new Error("Invalid event type: "+t);r[t].push({selector:e,fn:n})},render:function(t){e.store.featureChanged(t)}},o=function(t,o){for(var i=r[t],a=i.length;a--;){var u=i[a];if(u.selector(o)){u.fn.call(n,o)||e.store.render(),e.ui.updateMapClasses();break}}};return t.start.call(n),{render:t.render,stop:function(){t.stop&&t.stop()},trash:function(){t.trash&&(t.trash(),e.store.render())},combineFeatures:function(){t.combineFeatures&&t.combineFeatures()},uncombineFeatures:function(){t.uncombineFeatures&&t.uncombineFeatures()},drag:function(t){o("drag",t)},click:function(t){o("click",t)},mousemove:function(t){o("mousemove",t)},mousedown:function(t){o("mousedown",t)},mouseup:function(t){o("mouseup",t)},mouseout:function(t){o("mouseout",t)},keydown:function(t){o("keydown",t)},keyup:function(t){o("keyup",t)},touchstart:function(t){o("touchstart",t)},touchmove:function(t){o("touchmove",t)},touchend:function(t){o("touchend",t)},tap:function(t){o("tap",t)}}};function e(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function r(t){if(t.__esModule)return t;var e=t.default;if("function"==typeof e){var r=function t(){if(this instanceof t){var r=[null];return r.push.apply(r,arguments),new(Function.bind.apply(e,r))}return e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach((function(e){var n=Object.getOwnPropertyDescriptor(t,e);Object.defineProperty(r,e,n.get?n:{enumerable:!0,get:function(){return t[e]}})})),r}var n={},o={RADIUS:6378137,FLATTENING:1/298.257223563,POLAR_RADIUS:6356752.3142},i=o;function a(t){var e=0;if(t&&t.length>0){e+=Math.abs(u(t[0]));for(var r=1;r<t.length;r++)e-=Math.abs(u(t[r]))}return e}function u(t){var e,r,n,o,a,u,s=0,p=t.length;if(p>2){for(u=0;u<p;u++)u===p-2?(n=p-2,o=p-1,a=0):u===p-1?(n=p-1,o=0,a=1):(n=u,o=u+1,a=u+2),e=t[n],r=t[o],s+=(c(t[a][0])-c(e[0]))*Math.sin(c(r[1]));s=s*i.RADIUS*i.RADIUS/2}return s}function c(t){return t*Math.PI/180}n.geometry=function t(e){var r,n=0;switch(e.type){case"Polygon":return a(e.coordinates);case"MultiPolygon":for(r=0;r<e.coordinates.length;r++)n+=a(e.coordinates[r]);return n;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(r=0;r<e.geometries.length;r++)n+=t(e.geometries[r]);return n}},n.ring=u;var s={CONTROL_BASE:"mapboxgl-ctrl",CONTROL_PREFIX:"mapboxgl-ctrl-",CONTROL_BUTTON:"mapbox-gl-draw_ctrl-draw-btn",CONTROL_BUTTON_LINE:"mapbox-gl-draw_line",CONTROL_BUTTON_POLYGON:"mapbox-gl-draw_polygon",CONTROL_BUTTON_POINT:"mapbox-gl-draw_point",CONTROL_BUTTON_TRASH:"mapbox-gl-draw_trash",CONTROL_BUTTON_COMBINE_FEATURES:"mapbox-gl-draw_combine",CONTROL_BUTTON_UNCOMBINE_FEATURES:"mapbox-gl-draw_uncombine",CONTROL_GROUP:"mapboxgl-ctrl-group",ATTRIBUTION:"mapboxgl-ctrl-attrib",ACTIVE_BUTTON:"active",BOX_SELECT:"mapbox-gl-draw_boxselect"},p={HOT:"mapbox-gl-draw-hot",COLD:"mapbox-gl-draw-cold"},l={ADD:"add",MOVE:"move",DRAG:"drag",POINTER:"pointer",NONE:"none"},f={POLYGON:"polygon",LINE:"line_string",POINT:"point"},y={FEATURE:"Feature",POLYGON:"Polygon",LINE_STRING:"LineString",POINT:"Point",FEATURE_COLLECTION:"FeatureCollection",MULTI_PREFIX:"Multi",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon"},d={DRAW_LINE_STRING:"draw_line_string",DRAW_POLYGON:"draw_polygon",DRAW_POINT:"draw_point",SIMPLE_SELECT:"simple_select",DIRECT_SELECT:"direct_select",STATIC:"static"},h={CREATE:"draw.create",DELETE:"draw.delete",UPDATE:"draw.update",SELECTION_CHANGE:"draw.selectionchange",MODE_CHANGE:"draw.modechange",ACTIONABLE:"draw.actionable",RENDER:"draw.render",COMBINE_FEATURES:"draw.combine",UNCOMBINE_FEATURES:"draw.uncombine"},g={MOVE:"move",CHANGE_COORDINATES:"change_coordinates"},b={FEATURE:"feature",MIDPOINT:"midpoint",VERTEX:"vertex"},m={ACTIVE:"true",INACTIVE:"false"},v=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate"],A=-85,S=85,E=Object.freeze({__proto__:null,classes:s,sources:p,cursors:l,types:f,geojsonTypes:y,modes:d,events:h,updateActions:g,meta:b,activeStates:m,interactions:v,LAT_MIN:-90,LAT_RENDERED_MIN:A,LAT_MAX:90,LAT_RENDERED_MAX:S,LNG_MIN:-270,LNG_MAX:270}),w={Point:0,LineString:1,MultiLineString:1,Polygon:2};function _(t,e){var r=w[t.geometry.type]-w[e.geometry.type];return 0===r&&t.geometry.type===y.POLYGON?t.area-e.area:r}function I(t){return t.map((function(t){return t.geometry.type===y.POLYGON&&(t.area=n.geometry({type:y.FEATURE,property:{},geometry:t.geometry})),t})).sort(_).map((function(t){return delete t.area,t}))}function P(t,e){return void 0===e&&(e=0),[[t.point.x-e,t.point.y-e],[t.point.x+e,t.point.y+e]]}function O(t){if(this._items={},this._nums={},this._length=t?t.length:0,t)for(var e=0,r=t.length;e<r;e++)this.add(t[e]),void 0!==t[e]&&("string"==typeof t[e]?this._items[t[e]]=e:this._nums[t[e]]=e)}O.prototype.add=function(t){return this.has(t)||(this._length++,"string"==typeof t?this._items[t]=this._length:this._nums[t]=this._length),this},O.prototype.delete=function(t){return!1===this.has(t)||(this._length--,delete this._items[t],delete this._nums[t]),this},O.prototype.has=function(t){return("string"==typeof t||"number"==typeof t)&&(void 0!==this._items[t]||void 0!==this._nums[t])},O.prototype.values=function(){var t=this,e=[];return Object.keys(this._items).forEach((function(r){e.push({k:r,v:t._items[r]})})),Object.keys(this._nums).forEach((function(r){e.push({k:JSON.parse(r),v:t._nums[r]})})),e.sort((function(t,e){return t.v-e.v})).map((function(t){return t.k}))},O.prototype.clear=function(){return this._length=0,this._items={},this._nums={},this};var T=[b.FEATURE,b.MIDPOINT,b.VERTEX],F={click:function(t,e,r){return x(t,e,r,r.options.clickBuffer)},touch:function(t,e,r){return x(t,e,r,r.options.touchBuffer)}};function x(t,e,r,n){if(null===r.map)return[];var o=t?P(t,n):e,i={};r.options.styles&&(i.layers=r.options.styles.map((function(t){return t.id})).filter((function(t){return null!=r.map.getLayer(t)})).concat(r.options.existingFeatureLayerIds||[]));var a=r.map.queryRenderedFeatures(o,i).filter((function(t){return-1!==T.indexOf(t.properties.meta)})),u=new O,c=[];return a.forEach((function(t){var e=t.properties.id;u.has(e)||(u.add(e),c.push(t))})),I(c)}function C(t,e){var r=F.click(t,null,e),n={mouse:l.NONE};return r[0]&&(n.mouse=r[0].properties.active===m.ACTIVE?l.MOVE:l.POINTER,n.feature=r[0].properties.meta),-1!==e.events.currentModeName().indexOf("draw")&&(n.mouse=l.ADD),e.ui.queueMapClasses(n),e.ui.updateMapClasses(),r[0]}function N(t,e){var r=t.x-e.x,n=t.y-e.y;return Math.sqrt(r*r+n*n)}var U=4,M=12,j=500;function R(t,e,r){void 0===r&&(r={});var n=null!=r.fineTolerance?r.fineTolerance:U,o=null!=r.grossTolerance?r.grossTolerance:M,i=null!=r.interval?r.interval:j;t.point=t.point||e.point,t.time=t.time||e.time;var a=N(t.point,e.point);return a<n||a<o&&e.time-t.time<i}var L=25,B=250;function D(t,e,r){void 0===r&&(r={});var n=null!=r.tolerance?r.tolerance:L,o=null!=r.interval?r.interval:B;return t.point=t.point||e.point,t.time=t.time||e.time,N(t.point,e.point)<n&&e.time-t.time<o}var k={exports:{}},G=k.exports=function(t,e){if(e||(e=16),void 0===t&&(t=128),t<=0)return"0";for(var r=Math.log(Math.pow(2,t))/Math.log(e),n=2;r===1/0;n*=2)r=Math.log(Math.pow(2,t/n))/Math.log(e)*n;var o=r-Math.floor(r),i="";for(n=0;n<Math.floor(r);n++){i=Math.floor(Math.random()*e).toString(e)+i}if(o){var a=Math.pow(e,o);i=Math.floor(Math.random()*a).toString(e)+i}var u=parseInt(i,e);return u!==1/0&&u>=Math.pow(2,t)?G(t,e):i};G.rack=function(t,e,r){var n=function(n){var i=0;do{if(i++>10){if(!r)throw new Error("too many ID collisions, use more bits");t+=r}var a=G(t,e)}while(Object.hasOwnProperty.call(o,a));return o[a]=n,a},o=n.hats={};return n.get=function(t){return n.hats[t]},n.set=function(t,e){return n.hats[t]=e,n},n.bits=t||128,n.base=e||16,n};var $=e(k.exports),V=function(t,e){this.ctx=t,this.properties=e.properties||{},this.coordinates=e.geometry.coordinates,this.id=e.id||$(),this.type=e.geometry.type};V.prototype.changed=function(){this.ctx.store.featureChanged(this.id)},V.prototype.incomingCoords=function(t){this.setCoordinates(t)},V.prototype.setCoordinates=function(t){this.coordinates=t,this.changed()},V.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.coordinates))},V.prototype.setProperty=function(t,e){this.properties[t]=e},V.prototype.toGeoJSON=function(){return JSON.parse(JSON.stringify({id:this.id,type:y.FEATURE,properties:this.properties,geometry:{coordinates:this.getCoordinates(),type:this.type}}))},V.prototype.internal=function(t){var e={id:this.id,meta:b.FEATURE,"meta:type":this.type,active:m.INACTIVE,mode:t};if(this.ctx.options.userProperties)for(var r in this.properties)e["user_"+r]=this.properties[r];for(var n=0,o=["Demand","Type","Tier","Size","layerId","CostFactor"];n<o.length;n+=1){var i=o[n];null!=this.properties[i]&&(e[i]=this.properties[i])}return{id:this.id,type:y.FEATURE,properties:e,geometry:{coordinates:this.getCoordinates(),type:this.type}}};var W=function(t,e){V.call(this,t,e)};(W.prototype=Object.create(V.prototype)).isValid=function(){return"number"==typeof this.coordinates[0]&&"number"==typeof this.coordinates[1]},W.prototype.updateCoordinate=function(t,e,r){this.coordinates=3===arguments.length?[e,r]:[t,e],this.changed()},W.prototype.getCoordinate=function(){return this.getCoordinates()};var J=function(t,e){V.call(this,t,e)};(J.prototype=Object.create(V.prototype)).isValid=function(){return this.coordinates.length>1},J.prototype.addCoordinate=function(t,e,r){this.changed();var n=parseInt(t,10);this.coordinates.splice(n,0,[e,r])},J.prototype.getCoordinate=function(t){var e=parseInt(t,10);return JSON.parse(JSON.stringify(this.coordinates[e]))},J.prototype.removeCoordinate=function(t){this.changed(),this.coordinates.splice(parseInt(t,10),1)},J.prototype.updateCoordinate=function(t,e,r){var n=parseInt(t,10);this.coordinates[n]=[e,r],this.changed()};var z=function(t,e){V.call(this,t,e),this.coordinates=this.coordinates.map((function(t){return t.slice(0,-1)}))};(z.prototype=Object.create(V.prototype)).isValid=function(){return 0!==this.coordinates.length&&this.coordinates.every((function(t){return t.length>2}))},z.prototype.incomingCoords=function(t){this.coordinates=t.map((function(t){return t.slice(0,-1)})),this.changed()},z.prototype.setCoordinates=function(t){this.coordinates=t,this.changed()},z.prototype.addCoordinate=function(t,e,r){this.changed();var n=t.split(".").map((function(t){return parseInt(t,10)}));this.coordinates[n[0]].splice(n[1],0,[e,r])},z.prototype.removeCoordinate=function(t){this.changed();var e=t.split(".").map((function(t){return parseInt(t,10)})),r=this.coordinates[e[0]];r&&(r.splice(e[1],1),r.length<3&&this.coordinates.splice(e[0],1))},z.prototype.getCoordinate=function(t){var e=t.split(".").map((function(t){return parseInt(t,10)})),r=this.coordinates[e[0]];return JSON.parse(JSON.stringify(r[e[1]]))},z.prototype.getCoordinates=function(){return this.coordinates.map((function(t){return t.concat([t[0]])}))},z.prototype.updateCoordinate=function(t,e,r){this.changed();var n=t.split("."),o=parseInt(n[0],10),i=parseInt(n[1],10);void 0===this.coordinates[o]&&(this.coordinates[o]=[]),this.coordinates[o][i]=[e,r]};var q={MultiPoint:W,MultiLineString:J,MultiPolygon:z},H=function(t,e,r,n,o){var i=r.split("."),a=parseInt(i[0],10),u=i[1]?i.slice(1).join("."):null;return t[a][e](u,n,o)},Y=function(t,e){if(V.call(this,t,e),delete this.coordinates,this.model=q[e.geometry.type],void 0===this.model)throw new TypeError(e.geometry.type+" is not a valid type");this.features=this._coordinatesToFeatures(e.geometry.coordinates)};function X(t){this.map=t.map,this.drawConfig=JSON.parse(JSON.stringify(t.options||{})),this._ctx=t}(Y.prototype=Object.create(V.prototype))._coordinatesToFeatures=function(t){var e=this,r=this.model.bind(this);return t.map((function(t){return new r(e.ctx,{id:$(),type:y.FEATURE,properties:{},geometry:{coordinates:t,type:e.type.replace("Multi","")}})}))},Y.prototype.isValid=function(){return this.features.every((function(t){return t.isValid()}))},Y.prototype.setCoordinates=function(t){this.features=this._coordinatesToFeatures(t),this.changed()},Y.prototype.getCoordinate=function(t){return H(this.features,"getCoordinate",t)},Y.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.features.map((function(t){return t.type===y.POLYGON?t.getCoordinates():t.coordinates}))))},Y.prototype.updateCoordinate=function(t,e,r){H(this.features,"updateCoordinate",t,e,r),this.changed()},Y.prototype.addCoordinate=function(t,e,r){H(this.features,"addCoordinate",t,e,r),this.changed()},Y.prototype.removeCoordinate=function(t){H(this.features,"removeCoordinate",t),this.changed()},Y.prototype.getFeatures=function(){return this.features},X.prototype.setSelected=function(t){return this._ctx.store.setSelected(t)},X.prototype.setSelectedCoordinates=function(t){var e=this;this._ctx.store.setSelectedCoordinates(t),t.reduce((function(t,r){return void 0===t[r.feature_id]&&(t[r.feature_id]=!0,e._ctx.store.get(r.feature_id).changed()),t}),{})},X.prototype.getSelected=function(){return this._ctx.store.getSelected()},X.prototype.getSelectedIds=function(){return this._ctx.store.getSelectedIds()},X.prototype.isSelected=function(t){return this._ctx.store.isSelected(t)},X.prototype.getFeature=function(t){return this._ctx.store.get(t)},X.prototype.select=function(t){return this._ctx.store.select(t)},X.prototype.deselect=function(t){return this._ctx.store.deselect(t)},X.prototype.deleteFeature=function(t,e){return void 0===e&&(e={}),this._ctx.store.delete(t,e)},X.prototype.addFeature=function(t){return this._ctx.store.add(t)},X.prototype.clearSelectedFeatures=function(){return this._ctx.store.clearSelected()},X.prototype.clearSelectedCoordinates=function(){return this._ctx.store.clearSelectedCoordinates()},X.prototype.setActionableState=function(t){void 0===t&&(t={});var e={trash:t.trash||!1,combineFeatures:t.combineFeatures||!1,uncombineFeatures:t.uncombineFeatures||!1};return this._ctx.events.actionable(e)},X.prototype.changeMode=function(t,e,r){return void 0===e&&(e={}),void 0===r&&(r={}),this._ctx.events.changeMode(t,e,r)},X.prototype.updateUIClasses=function(t){return this._ctx.ui.queueMapClasses(t)},X.prototype.activateUIButton=function(t){return this._ctx.ui.setActiveButton(t)},X.prototype.featuresAt=function(t,e,r){if(void 0===r&&(r="click"),"click"!==r&&"touch"!==r)throw new Error("invalid buffer type");return F[r](t,e,this._ctx)},X.prototype.newFeature=function(t){var e=t.geometry.type;return e===y.POINT?new W(this._ctx,t):e===y.LINE_STRING?new J(this._ctx,t):e===y.POLYGON?new z(this._ctx,t):new Y(this._ctx,t)},X.prototype.isInstanceOf=function(t,e){if(t===y.POINT)return e instanceof W;if(t===y.LINE_STRING)return e instanceof J;if(t===y.POLYGON)return e instanceof z;if("MultiFeature"===t)return e instanceof Y;throw new Error("Unknown feature class: "+t)},X.prototype.doRender=function(t){return this._ctx.store.featureChanged(t)},X.prototype.onSetup=function(){},X.prototype.onDrag=function(){},X.prototype.onClick=function(){},X.prototype.onMouseMove=function(){},X.prototype.onMouseDown=function(){},X.prototype.onMouseUp=function(){},X.prototype.onMouseOut=function(){},X.prototype.onKeyUp=function(){},X.prototype.onKeyDown=function(){},X.prototype.onTouchStart=function(){},X.prototype.onTouchMove=function(){},X.prototype.onTouchEnd=function(){},X.prototype.onTap=function(){},X.prototype.onStop=function(){},X.prototype.onTrash=function(){},X.prototype.onCombineFeature=function(){},X.prototype.onUncombineFeature=function(){},X.prototype.toDisplayFeatures=function(){throw new Error("You must overwrite toDisplayFeatures")};var Z={drag:"onDrag",click:"onClick",mousemove:"onMouseMove",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseout:"onMouseOut",keyup:"onKeyUp",keydown:"onKeyDown",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onTouchEnd",tap:"onTap"},K=Object.keys(Z);function Q(t){var e=Object.keys(t);return function(r,n){void 0===n&&(n={});var o={},i=e.reduce((function(e,r){return e[r]=t[r],e}),new X(r));return{start:function(){var e=this;o=i.onSetup(n),K.forEach((function(r){var n,a=Z[r],u=function(){return!1};t[a]&&(u=function(){return!0}),e.on(r,u,(n=a,function(t){return i[n](o,t)}))}))},stop:function(){i.onStop(o)},trash:function(){i.onTrash(o)},combineFeatures:function(){i.onCombineFeatures(o)},uncombineFeatures:function(){i.onUncombineFeatures(o)},render:function(t,e){i.toDisplayFeatures(o,t,e)}}}}function tt(t){return[].concat(t).filter((function(t){return void 0!==t}))}function et(){var t=this;if(!(t.ctx.map&&void 0!==t.ctx.map.getSource(p.HOT)))return c();var e=t.ctx.events.currentModeName();t.ctx.ui.queueMapClasses({mode:e});var r=[],n=[];t.isDirty?n=t.getAllIds():(r=t.getChangedIds().filter((function(e){return void 0!==t.get(e)})),n=t.sources.hot.filter((function(e){return e.properties.id&&-1===r.indexOf(e.properties.id)&&void 0!==t.get(e.properties.id)})).map((function(t){return t.properties.id}))),t.sources.hot=[];var o=t.sources.cold.length;t.sources.cold=t.isDirty?[]:t.sources.cold.filter((function(t){var e=t.properties.id||t.properties.parent;return-1===r.indexOf(e)}));var i=o!==t.sources.cold.length||n.length>0;function a(r,n){var o=t.get(r).internal(e);t.ctx.events.currentModeRender(o,(function(e){t.sources[n].push(e)}))}if(r.forEach((function(t){return a(t,"hot")})),n.forEach((function(t){return a(t,"cold")})),i&&t.ctx.map.getSource(p.COLD).setData({type:y.FEATURE_COLLECTION,features:t.sources.cold}),t.ctx.map.getSource(p.HOT).setData({type:y.FEATURE_COLLECTION,features:t.sources.hot}),t._emitSelectionChange&&(t.ctx.map.fire(h.SELECTION_CHANGE,{features:t.getSelected().map((function(t){return t.toGeoJSON()})),points:t.getSelectedCoordinates().map((function(t){return{type:y.FEATURE,properties:{},geometry:{type:y.POINT,coordinates:t.coordinates}}}))}),t._emitSelectionChange=!1),t._deletedFeaturesToEmit.length){var u=t._deletedFeaturesToEmit.map((function(t){return t.toGeoJSON()}));t._deletedFeaturesToEmit=[],t.ctx.map.fire(h.DELETE,{features:u})}function c(){t.isDirty=!1,t.clearChangedIds()}c(),t.ctx.map.fire(h.RENDER,{})}function rt(t){var e,r=this;this._features={},this._featureIds=new O,this._selectedFeatureIds=new O,this._selectedCoordinates=[],this._changedFeatureIds=new O,this._deletedFeaturesToEmit=[],this._emitSelectionChange=!1,this._mapInitialConfig={},this.ctx=t,this.sources={hot:[],cold:[]},this.render=function(){e||(e=requestAnimationFrame((function(){e=null,et.call(r)})))},this.isDirty=!1}function nt(t,e){var r=t._selectedCoordinates.filter((function(e){return t._selectedFeatureIds.has(e.feature_id)}));t._selectedCoordinates.length===r.length||e.silent||(t._emitSelectionChange=!0),t._selectedCoordinates=r}rt.prototype.createRenderBatch=function(){var t=this,e=this.render,r=0;return this.render=function(){r++},function(){t.render=e,r>0&&t.render()}},rt.prototype.setDirty=function(){return this.isDirty=!0,this},rt.prototype.featureChanged=function(t){return this._changedFeatureIds.add(t),this},rt.prototype.getChangedIds=function(){return this._changedFeatureIds.values()},rt.prototype.clearChangedIds=function(){return this._changedFeatureIds.clear(),this},rt.prototype.getAllIds=function(){return this._featureIds.values()},rt.prototype.add=function(t){return this.featureChanged(t.id),this._features[t.id]=t,this._featureIds.add(t.id),this},rt.prototype.delete=function(t,e){var r=this;return void 0===e&&(e={}),tt(t).forEach((function(t){r._featureIds.has(t)&&(r._featureIds.delete(t),r._selectedFeatureIds.delete(t),e.silent||-1===r._deletedFeaturesToEmit.indexOf(r._features[t])&&r._deletedFeaturesToEmit.push(r._features[t]),delete r._features[t],r.isDirty=!0)})),nt(this,e),this},rt.prototype.get=function(t){return this._features[t]},rt.prototype.getAll=function(){var t=this;return Object.keys(this._features).map((function(e){return t._features[e]}))},rt.prototype.select=function(t,e){var r=this;return void 0===e&&(e={}),tt(t).forEach((function(t){r._selectedFeatureIds.has(t)||(r._selectedFeatureIds.add(t),r._changedFeatureIds.add(t),e.silent||(r._emitSelectionChange=!0))})),this},rt.prototype.deselect=function(t,e){var r=this;return void 0===e&&(e={}),tt(t).forEach((function(t){r._selectedFeatureIds.has(t)&&(r._selectedFeatureIds.delete(t),r._changedFeatureIds.add(t),e.silent||(r._emitSelectionChange=!0))})),nt(this,e),this},rt.prototype.clearSelected=function(t){return void 0===t&&(t={}),this.deselect(this._selectedFeatureIds.values(),{silent:t.silent}),this},rt.prototype.setSelected=function(t,e){var r=this;return void 0===e&&(e={}),t=tt(t),this.deselect(this._selectedFeatureIds.values().filter((function(e){return-1===t.indexOf(e)})),{silent:e.silent}),this.select(t.filter((function(t){return!r._selectedFeatureIds.has(t)})),{silent:e.silent}),this},rt.prototype.setSelectedCoordinates=function(t){return this._selectedCoordinates=t,this._emitSelectionChange=!0,this},rt.prototype.clearSelectedCoordinates=function(){return this._selectedCoordinates=[],this._emitSelectionChange=!0,this},rt.prototype.getSelectedIds=function(){return this._selectedFeatureIds.values()},rt.prototype.getSelected=function(){var t=this;return this._selectedFeatureIds.values().map((function(e){return t.get(e)}))},rt.prototype.getSelectedCoordinates=function(){var t=this;return this._selectedCoordinates.map((function(e){return{coordinates:t.get(e.feature_id).getCoordinate(e.coord_path)}}))},rt.prototype.isSelected=function(t){return this._selectedFeatureIds.has(t)},rt.prototype.setFeatureProperty=function(t,e,r){this.get(t).setProperty(e,r),this.featureChanged(t)},rt.prototype.storeMapConfig=function(){var t=this;v.forEach((function(e){t.ctx.map[e]&&(t._mapInitialConfig[e]=t.ctx.map[e].isEnabled())}))},rt.prototype.restoreMapConfig=function(){var t=this;Object.keys(this._mapInitialConfig).forEach((function(e){t._mapInitialConfig[e]?t.ctx.map[e].enable():t.ctx.map[e].disable()}))},rt.prototype.getInitialConfigValue=function(t){return void 0===this._mapInitialConfig[t]||this._mapInitialConfig[t]};var ot=function(){for(var t=arguments,e={},r=0;r<arguments.length;r++){var n=t[r];for(var o in n)it.call(n,o)&&(e[o]=n[o])}return e},it=Object.prototype.hasOwnProperty;var at=e(ot),ut=["mode","feature","mouse"];function ct(e){var r=null,n=null,o={onRemove:function(){return e.map.off("load",o.connect),clearInterval(n),o.removeLayers(),e.store.restoreMapConfig(),e.ui.removeButtons(),e.events.removeEventListeners(),e.ui.clearMapClasses(),e.boxZoomInitial&&e.map.boxZoom.enable(),e.map=null,e.container=null,e.store=null,r&&r.parentNode&&r.parentNode.removeChild(r),r=null,this},connect:function(){e.map.off("load",o.connect),clearInterval(n),o.addLayers(),e.store.storeMapConfig(),e.events.addEventListeners()},onAdd:function(i){var a=i.fire;return i.fire=function(t,e){var r=arguments;return 1===a.length&&1!==arguments.length&&(r=[at({},{type:t},e)]),a.apply(i,r)},e.map=i,e.events=function(e){var r=Object.keys(e.options.modes).reduce((function(t,r){return t[r]=Q(e.options.modes[r]),t}),{}),n={},o={},i={},a=null,u=null;i.drag=function(t,r){r({point:t.point,time:(new Date).getTime()})?(e.ui.queueMapClasses({mouse:l.DRAG}),u.drag(t)):t.originalEvent.stopPropagation()},i.mousedrag=function(t){i.drag(t,(function(t){return!R(n,t)}))},i.touchdrag=function(t){i.drag(t,(function(t){return!D(o,t)}))},i.mousemove=function(t){if(1===(void 0!==t.originalEvent.buttons?t.originalEvent.buttons:t.originalEvent.which))return i.mousedrag(t);var r=C(t,e);t.featureTarget=r,u.mousemove(t)},i.mousedown=function(t){n={time:(new Date).getTime(),point:t.point};var r=C(t,e);t.featureTarget=r,u.mousedown(t)},i.mouseup=function(t){var r=C(t,e);t.featureTarget=r,R(n,{point:t.point,time:(new Date).getTime()})?u.click(t):u.mouseup(t)},i.mouseout=function(t){u.mouseout(t)},i.touchstart=function(t){if(e.options.touchEnabled){o={time:(new Date).getTime(),point:t.point};var r=F.touch(t,null,e)[0];t.featureTarget=r,u.touchstart(t)}},i.touchmove=function(t){if(e.options.touchEnabled)return u.touchmove(t),i.touchdrag(t)},i.touchend=function(t){if(t.originalEvent.preventDefault(),e.options.touchEnabled){var r=F.touch(t,null,e)[0];t.featureTarget=r,D(o,{time:(new Date).getTime(),point:t.point})?u.tap(t):u.touchend(t)}};var c=function(t){return!(8===t||46===t||t>=48&&t<=57)};function s(n,o,i){void 0===i&&(i={}),u.stop();var c=r[n];if(void 0===c)throw new Error(n+" is not valid");a=n;var s=c(e,o);u=t(s,e),i.silent||e.map.fire(h.MODE_CHANGE,{mode:n}),e.store.setDirty(),e.store.render()}i.keydown=function(t){(t.srcElement||t.target).classList.contains("mapboxgl-canvas")&&(8!==t.keyCode&&46!==t.keyCode||!e.options.controls.trash?c(t.keyCode)?u.keydown(t):49===t.keyCode&&e.options.controls.point?s(d.DRAW_POINT):50===t.keyCode&&e.options.controls.line_string?s(d.DRAW_LINE_STRING):51===t.keyCode&&e.options.controls.polygon&&s(d.DRAW_POLYGON):(t.preventDefault(),u.trash()))},i.keyup=function(t){c(t.keyCode)&&u.keyup(t)},i.zoomend=function(){e.store.changeZoom()},i.data=function(t){if("style"===t.dataType){var r=e.setup,n=e.map,o=e.options,i=e.store;o.styles.some((function(t){return n.getLayer(t.id)}))||(r.addLayers(),i.setDirty(),i.render())}};var p={trash:!1,combineFeatures:!1,uncombineFeatures:!1},f={start:function(){a=e.options.defaultMode,u=t(r[a](e),e)},changeMode:s,actionable:function(t){var r=!1;Object.keys(t).forEach((function(e){if(void 0===p[e])throw new Error("Invalid action type");p[e]!==t[e]&&(r=!0),p[e]=t[e]})),r&&e.map.fire(h.ACTIONABLE,{actions:p})},currentModeName:function(){return a},currentModeRender:function(t,e){return u.render(t,e)},fire:function(t,e){i[t]&&i[t](e)},addEventListeners:function(){e.map.on("mousemove",i.mousemove),e.map.on("mousedown",i.mousedown),e.map.on("mouseup",i.mouseup),e.map.on("data",i.data),e.map.on("touchmove",i.touchmove),e.map.on("touchstart",i.touchstart),e.map.on("touchend",i.touchend),e.container.addEventListener("mouseout",i.mouseout),e.options.keybindings&&(e.container.addEventListener("keydown",i.keydown),e.container.addEventListener("keyup",i.keyup))},removeEventListeners:function(){e.map.off("mousemove",i.mousemove),e.map.off("mousedown",i.mousedown),e.map.off("mouseup",i.mouseup),e.map.off("data",i.data),e.map.off("touchmove",i.touchmove),e.map.off("touchstart",i.touchstart),e.map.off("touchend",i.touchend),e.container.removeEventListener("mouseout",i.mouseout),e.options.keybindings&&(e.container.removeEventListener("keydown",i.keydown),e.container.removeEventListener("keyup",i.keyup))},trash:function(t){u.trash(t)},combineFeatures:function(){u.combineFeatures()},uncombineFeatures:function(){u.uncombineFeatures()},getMode:function(){return a},getCurrentMode:function(){return u}};return f}(e),e.ui=function(t){var e={},r=null,n={mode:null,feature:null,mouse:null},o={mode:null,feature:null,mouse:null};function i(t){o=at(o,t)}function a(){var e,r;if(t.container){var i=[],a=[];ut.forEach((function(t){o[t]!==n[t]&&(i.push(t+"-"+n[t]),null!==o[t]&&a.push(t+"-"+o[t]))})),i.length>0&&(e=t.container.classList).remove.apply(e,i),a.length>0&&(r=t.container.classList).add.apply(r,a),n=at(n,o)}}function u(t,e){void 0===e&&(e={});var n=document.createElement("button");return n.className=s.CONTROL_BUTTON+" "+e.className,n.setAttribute("title",e.title),e.container.appendChild(n),n.addEventListener("click",(function(n){if(n.preventDefault(),n.stopPropagation(),n.target===r)return c(),void e.onDeactivate();p(t),e.onActivate()}),!0),n}function c(){r&&(r.classList.remove(s.ACTIVE_BUTTON),r=null)}function p(t){c();var n=e[t];n&&n&&"trash"!==t&&(n.classList.add(s.ACTIVE_BUTTON),r=n)}return{setActiveButton:p,queueMapClasses:i,updateMapClasses:a,clearMapClasses:function(){i({mode:null,feature:null,mouse:null}),a()},addButtons:function(){var r=t.options.controls,n=document.createElement("div");return n.className=s.CONTROL_GROUP+" "+s.CONTROL_BASE,r?(r[f.LINE]&&(e[f.LINE]=u(f.LINE,{container:n,className:s.CONTROL_BUTTON_LINE,title:"LineString tool "+(t.options.keybindings?"(l)":""),onActivate:function(){return t.events.changeMode(d.DRAW_LINE_STRING)},onDeactivate:function(){return t.events.trash()}})),r[f.POLYGON]&&(e[f.POLYGON]=u(f.POLYGON,{container:n,className:s.CONTROL_BUTTON_POLYGON,title:"Polygon tool "+(t.options.keybindings?"(p)":""),onActivate:function(){return t.events.changeMode(d.DRAW_POLYGON)},onDeactivate:function(){return t.events.trash()}})),r[f.POINT]&&(e[f.POINT]=u(f.POINT,{container:n,className:s.CONTROL_BUTTON_POINT,title:"Marker tool "+(t.options.keybindings?"(m)":""),onActivate:function(){return t.events.changeMode(d.DRAW_POINT)},onDeactivate:function(){return t.events.trash()}})),r.trash&&(e.trash=u("trash",{container:n,className:s.CONTROL_BUTTON_TRASH,title:"Delete",onActivate:function(){t.events.trash()}})),r.combine_features&&(e.combine_features=u("combineFeatures",{container:n,className:s.CONTROL_BUTTON_COMBINE_FEATURES,title:"Combine",onActivate:function(){t.events.combineFeatures()}})),r.uncombine_features&&(e.uncombine_features=u("uncombineFeatures",{container:n,className:s.CONTROL_BUTTON_UNCOMBINE_FEATURES,title:"Uncombine",onActivate:function(){t.events.uncombineFeatures()}})),n):n},removeButtons:function(){Object.keys(e).forEach((function(t){var r=e[t];r.parentNode&&r.parentNode.removeChild(r),delete e[t]}))}}}(e),e.container=i.getContainer(),e.store=new rt(e),r=e.ui.addButtons(),e.options.boxSelect&&(e.boxZoomInitial=i.boxZoom.isEnabled(),i.boxZoom.disable(),i.dragPan.disable(),i.dragPan.enable()),i.loaded()?o.connect():(i.on("load",o.connect),n=setInterval((function(){i.loaded()&&o.connect()}),16)),e.events.start(),r},addLayers:function(){e.map.addSource(p.COLD,{data:{type:y.FEATURE_COLLECTION,features:[]},type:"geojson"}),e.map.addSource(p.HOT,{data:{type:y.FEATURE_COLLECTION,features:[]},type:"geojson"}),e.options.styles.forEach((function(t){e.map.addLayer(t)})),e.store.setDirty(!0),e.store.render()},removeLayers:function(){e.options.styles.forEach((function(t){e.map.getLayer(t.id)&&e.map.removeLayer(t.id)})),e.map.getSource(p.COLD)&&e.map.removeSource(p.COLD),e.map.getSource(p.HOT)&&e.map.removeSource(p.HOT)}};return e.setup=o,o}var st=[{id:"gl-draw-polygon-fill-inactive",type:"fill",filter:["all",["==","active","false"],["==","$type","Polygon"],["!=","mode","static"]],paint:{"fill-color":"#3bb2d0","fill-outline-color":"#3bb2d0","fill-opacity":.1}},{id:"gl-draw-polygon-fill-active",type:"fill",filter:["all",["==","active","true"],["==","$type","Polygon"]],paint:{"fill-color":"#fbb03b","fill-outline-color":"#fbb03b","fill-opacity":.1}},{id:"gl-draw-polygon-midpoint",type:"circle",filter:["all",["==","$type","Point"],["==","meta","midpoint"]],paint:{"circle-radius":3,"circle-color":"#fbb03b"}},{id:"gl-draw-polygon-stroke-inactive",type:"line",filter:["all",["==","active","false"],["==","$type","Polygon"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#3bb2d0","line-width":2}},{id:"gl-draw-polygon-stroke-active",type:"line",filter:["all",["==","active","true"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#fbb03b","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-line-inactive",type:"line",filter:["all",["==","active","false"],["==","$type","LineString"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#3bb2d0","line-width":2}},{id:"gl-draw-line-active",type:"line",filter:["all",["==","$type","LineString"],["==","active","true"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#fbb03b","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-polygon-and-line-vertex-stroke-inactive",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":5,"circle-color":"#fff"}},{id:"gl-draw-polygon-and-line-vertex-inactive",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":3,"circle-color":"#fbb03b"}},{id:"gl-draw-point-point-stroke-inactive",type:"circle",filter:["all",["==","active","false"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"]],paint:{"circle-radius":5,"circle-opacity":1,"circle-color":"#fff"}},{id:"gl-draw-point-inactive",type:"circle",filter:["all",["==","active","false"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"]],paint:{"circle-radius":3,"circle-color":"#3bb2d0"}},{id:"gl-draw-point-stroke-active",type:"circle",filter:["all",["==","$type","Point"],["==","active","true"],["!=","meta","midpoint"]],paint:{"circle-radius":7,"circle-color":"#fff"}},{id:"gl-draw-point-active",type:"circle",filter:["all",["==","$type","Point"],["!=","meta","midpoint"],["==","active","true"]],paint:{"circle-radius":5,"circle-color":"#fbb03b"}},{id:"gl-draw-polygon-fill-static",type:"fill",filter:["all",["==","mode","static"],["==","$type","Polygon"]],paint:{"fill-color":"#404040","fill-outline-color":"#404040","fill-opacity":.1}},{id:"gl-draw-polygon-stroke-static",type:"line",filter:["all",["==","mode","static"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#404040","line-width":2}},{id:"gl-draw-line-static",type:"line",filter:["all",["==","mode","static"],["==","$type","LineString"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#404040","line-width":2}},{id:"gl-draw-point-static",type:"circle",filter:["all",["==","mode","static"],["==","$type","Point"]],paint:{"circle-radius":5,"circle-color":"#404040"}}];function pt(t){return function(e){var r=e.featureTarget;return!!r&&(!!r.properties&&r.properties.meta===t)}}function lt(t){return!!t.originalEvent&&(!!t.originalEvent.shiftKey&&0===t.originalEvent.button)}function ft(t){return!!t.featureTarget&&(!!t.featureTarget.properties&&(t.featureTarget.properties.active===m.ACTIVE&&t.featureTarget.properties.meta===b.FEATURE))}function yt(t){return!!t.featureTarget&&(!!t.featureTarget.properties&&(t.featureTarget.properties.active===m.INACTIVE&&t.featureTarget.properties.meta===b.FEATURE))}function dt(t){return void 0===t.featureTarget}function ht(t){return!!t.featureTarget&&(!!t.featureTarget.properties&&t.featureTarget.properties.meta===b.FEATURE)}function gt(t){var e=t.featureTarget;return!!e&&(!!e.properties&&e.properties.meta===b.VERTEX)}function bt(t){return!!t.originalEvent&&!0===t.originalEvent.shiftKey}function mt(t){return 27===t.keyCode}function vt(t){return 13===t.keyCode}var At=Object.freeze({__proto__:null,isOfMetaType:pt,isShiftMousedown:lt,isActiveFeature:ft,isInactiveFeature:yt,noTarget:dt,isFeature:ht,isVertex:gt,isShiftDown:bt,isEscapeKey:mt,isEnterKey:vt,isTrue:function(){return!0}}),St=Et;function Et(t,e){this.x=t,this.y=e}Et.prototype={clone:function(){return new Et(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},multByPoint:function(t){return this.clone()._multByPoint(t)},divByPoint:function(t){return this.clone()._divByPoint(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},rotateAround:function(t,e){return this.clone()._rotateAround(t,e)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var e=t.x-this.x,r=t.y-this.y;return e*e+r*r},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,e){return Math.atan2(this.x*e-this.y*t,this.x*t+this.y*e)},_matMult:function(t){var e=t[0]*this.x+t[1]*this.y,r=t[2]*this.x+t[3]*this.y;return this.x=e,this.y=r,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_multByPoint:function(t){return this.x*=t.x,this.y*=t.y,this},_divByPoint:function(t){return this.x/=t.x,this.y/=t.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var e=Math.cos(t),r=Math.sin(t),n=e*this.x-r*this.y,o=r*this.x+e*this.y;return this.x=n,this.y=o,this},_rotateAround:function(t,e){var r=Math.cos(t),n=Math.sin(t),o=e.x+r*(this.x-e.x)-n*(this.y-e.y),i=e.y+n*(this.x-e.x)+r*(this.y-e.y);return this.x=o,this.y=i,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},Et.convert=function(t){return t instanceof Et?t:Array.isArray(t)?new Et(t[0],t[1]):t};var wt=e(St);function _t(t,e){var r=e.getBoundingClientRect();return new wt(t.clientX-r.left-(e.clientLeft||0),t.clientY-r.top-(e.clientTop||0))}function It(t,e,r,n){return{type:y.FEATURE,properties:{meta:b.VERTEX,parent:t,coord_path:r,active:n?m.ACTIVE:m.INACTIVE},geometry:{type:y.POINT,coordinates:e}}}function Pt(t,e,r){var n=e.geometry.coordinates,o=r.geometry.coordinates;if(n[1]>S||n[1]<A||o[1]>S||o[1]<A)return null;var i={lng:(n[0]+o[0])/2,lat:(n[1]+o[1])/2};return{type:y.FEATURE,properties:{meta:b.MIDPOINT,parent:t,lng:i.lng,lat:i.lat,coord_path:r.properties.coord_path},geometry:{type:y.POINT,coordinates:[i.lng,i.lat]}}}function Ot(t,e,r){void 0===e&&(e={}),void 0===r&&(r=null);var n,o=t.geometry,i=o.type,a=o.coordinates,u=t.properties&&t.properties.id,c=[];function s(t,r){var n="",o=null;t.forEach((function(t,i){var a=null!=r?r+"."+i:String(i),s=It(u,t,a,p(a));if(e.midpoints&&o){var l=Pt(u,o,s);l&&c.push(l)}o=s;var f=JSON.stringify(t);n!==f&&c.push(s),0===i&&(n=f)}))}function p(t){return!!e.selectedPaths&&-1!==e.selectedPaths.indexOf(t)}return i===y.POINT?c.push(It(u,a,r,p(r))):i===y.POLYGON?a.forEach((function(t,e){s(t,null!==r?r+"."+e:String(e))})):i===y.LINE_STRING?s(a,r):0===i.indexOf(y.MULTI_PREFIX)&&(n=i.replace(y.MULTI_PREFIX,""),a.forEach((function(r,o){var i={type:y.FEATURE,properties:t.properties,geometry:{type:n,coordinates:r}};c=c.concat(Ot(i,e,o))}))),c}var Tt={enable:function(t){setTimeout((function(){t.map&&t.map.doubleClickZoom&&t._ctx&&t._ctx.store&&t._ctx.store.getInitialConfigValue&&t._ctx.store.getInitialConfigValue("doubleClickZoom")&&t.map.doubleClickZoom.enable()}),0)},disable:function(t){setTimeout((function(){t.map&&t.map.doubleClickZoom&&t.map.doubleClickZoom.disable()}),0)}},Ft={exports:{}},xt=function(t){if(!t||!t.type)return null;var e=Ct[t.type];if(!e)return null;if("geometry"===e)return{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:t}]};if("feature"===e)return{type:"FeatureCollection",features:[t]};if("featurecollection"===e)return t},Ct={Point:"geometry",MultiPoint:"geometry",LineString:"geometry",MultiLineString:"geometry",Polygon:"geometry",MultiPolygon:"geometry",GeometryCollection:"geometry",Feature:"feature",FeatureCollection:"featurecollection"};var Nt=e(xt);var Ut=Object.freeze({__proto__:null,default:function t(e){switch(e&&e.type||null){case"FeatureCollection":return e.features=e.features.reduce((function(e,r){return e.concat(t(r))}),[]),e;case"Feature":return e.geometry?t(e.geometry).map((function(t){var r={type:"Feature",properties:JSON.parse(JSON.stringify(e.properties)),geometry:t};return void 0!==e.id&&(r.id=e.id),r})):[e];case"MultiPoint":return e.coordinates.map((function(t){return{type:"Point",coordinates:t}}));case"MultiPolygon":return e.coordinates.map((function(t){return{type:"Polygon",coordinates:t}}));case"MultiLineString":return e.coordinates.map((function(t){return{type:"LineString",coordinates:t}}));case"GeometryCollection":return e.geometries.map(t).reduce((function(t,e){return t.concat(e)}),[]);case"Point":case"Polygon":case"LineString":return[e]}}}),Mt=xt,jt=r(Ut),Rt=function(t){return function t(e){if(Array.isArray(e)&&e.length&&"number"==typeof e[0])return[e];return e.reduce((function(e,r){return Array.isArray(r)&&Array.isArray(r[0])?e.concat(t(r)):(e.push(r),e)}),[])}(t)};jt instanceof Function||(jt=jt.default);var Lt,Bt,Dt=Function.prototype.toString,kt="object"==typeof Reflect&&null!==Reflect&&Reflect.apply;if("function"==typeof kt&&"function"==typeof Object.defineProperty)try{Lt=Object.defineProperty({},"length",{get:function(){throw Bt}}),Bt={},kt((function(){throw 42}),null,Lt)}catch(t){t!==Bt&&(kt=null)}else kt=null;var Gt,$t,Vt=/^\s*class\b/,Wt=function(t){try{var e=Dt.call(t);return Vt.test(e)}catch(t){return!1}},Jt=Object.prototype.toString,zt="function"==typeof Symbol&&!!Symbol.toStringTag,qt="object"==typeof document&&void 0===document.all&&void 0!==document.all?document.all:{},Ht=kt?function(t){if(t===qt)return!0;if(!t)return!1;if("function"!=typeof t&&"object"!=typeof t)return!1;if("function"==typeof t&&!t.prototype)return!0;try{kt(t,null,Lt)}catch(t){if(t!==Bt)return!1}return!Wt(t)}:function(t){if(t===qt)return!0;if(!t)return!1;if("function"!=typeof t&&"object"!=typeof t)return!1;if("function"==typeof t&&!t.prototype)return!0;if(zt)return function(t){try{return!Wt(t)&&(Dt.call(t),!0)}catch(t){return!1}}(t);if(Wt(t))return!1;var e=Jt.call(t);return"[object Function]"===e||"[object GeneratorFunction]"===e},Yt=Ht,Xt=Object.prototype.toString,Zt=Object.prototype.hasOwnProperty,Kt=function(t,e,r){if(!Yt(e))throw new TypeError("iterator must be a function");var n;arguments.length>=3&&(n=r),"[object Array]"===Xt.call(t)?function(t,e,r){for(var n=0,o=t.length;n<o;n++)Zt.call(t,n)&&(null==r?e(t[n],n,t):e.call(r,t[n],n,t))}(t,e,n):"string"==typeof t?function(t,e,r){for(var n=0,o=t.length;n<o;n++)null==r?e(t.charAt(n),n,t):e.call(r,t.charAt(n),n,t)}(t,e,n):function(t,e,r){for(var n in t)Zt.call(t,n)&&(null==r?e(t[n],n,t):e.call(r,t[n],n,t))}(t,e,n)},Qt=["Float32Array","Float64Array","Int8Array","Int16Array","Int32Array","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array"],te=Qt,ee="undefined"==typeof globalThis?global:globalThis,re={exports:{}},ne=Object.prototype.toString,oe=Math.max,ie=function(t,e){for(var r=[],n=0;n<t.length;n+=1)r[n]=t[n];for(var o=0;o<e.length;o+=1)r[o+t.length]=e[o];return r},ae=function(t){var e=this;if("function"!=typeof e||"[object Function]"!==ne.apply(e))throw new TypeError("Function.prototype.bind called on incompatible "+e);for(var r,n=function(t,e){for(var r=[],n=e||0,o=0;n<t.length;n+=1,o+=1)r[o]=t[n];return r}(arguments,1),o=oe(0,e.length-n.length),i=[],a=0;a<o;a++)i[a]="$"+a;if(r=Function("binder","return function ("+function(t,e){for(var r="",n=0;n<t.length;n+=1)r+=t[n],n+1<t.length&&(r+=e);return r}(i,",")+"){ return binder.apply(this,arguments); }")((function(){if(this instanceof r){var o=e.apply(this,ie(n,arguments));return Object(o)===o?o:this}return e.apply(t,ie(n,arguments))})),e.prototype){var u=function(){};u.prototype=e.prototype,r.prototype=new u,u.prototype=null}return r},ue=Function.prototype.bind||ae,ce=Error,se=EvalError,pe=RangeError,le=ReferenceError,fe=SyntaxError,ye=TypeError,de=URIError;function he(){return $t?Gt:($t=1,Gt=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var t={},e=Symbol("test"),r=Object(e);if("string"==typeof e)return!1;if("[object Symbol]"!==Object.prototype.toString.call(e))return!1;if("[object Symbol]"!==Object.prototype.toString.call(r))return!1;for(e in t[e]=42,t)return!1;if("function"==typeof Object.keys&&0!==Object.keys(t).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(t).length)return!1;var n=Object.getOwnPropertySymbols(t);if(1!==n.length||n[0]!==e)return!1;if(!Object.prototype.propertyIsEnumerable.call(t,e))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var o=Object.getOwnPropertyDescriptor(t,e);if(42!==o.value||!0!==o.enumerable)return!1}return!0})}var ge,be="undefined"!=typeof Symbol&&Symbol,me=he(),ve=function(){return"function"==typeof be&&("function"==typeof Symbol&&("symbol"==typeof be("foo")&&("symbol"==typeof Symbol("bar")&&me())))},Ae={foo:{}},Se=Object,Ee=function(){return{__proto__:Ae}.foo===Ae.foo&&!({__proto__:null}instanceof Se)},we=Object.prototype.toString,_e=Math.max,Ie=function(t,e){for(var r=[],n=0;n<t.length;n+=1)r[n]=t[n];for(var o=0;o<e.length;o+=1)r[o+t.length]=e[o];return r},Pe=function(t){var e=this;if("function"!=typeof e||"[object Function]"!==we.apply(e))throw new TypeError("Function.prototype.bind called on incompatible "+e);for(var r,n=function(t,e){for(var r=[],n=e||0,o=0;n<t.length;n+=1,o+=1)r[o]=t[n];return r}(arguments,1),o=_e(0,e.length-n.length),i=[],a=0;a<o;a++)i[a]="$"+a;if(r=Function("binder","return function ("+function(t,e){for(var r="",n=0;n<t.length;n+=1)r+=t[n],n+1<t.length&&(r+=e);return r}(i,",")+"){ return binder.apply(this,arguments); }")((function(){if(this instanceof r){var o=e.apply(this,Ie(n,arguments));return Object(o)===o?o:this}return e.apply(t,Ie(n,arguments))})),e.prototype){var u=function(){};u.prototype=e.prototype,r.prototype=new u,u.prototype=null}return r},Oe=Function.prototype.bind||Pe,Te=Object.prototype.toString,Fe=Math.max,xe=function(t,e){for(var r=[],n=0;n<t.length;n+=1)r[n]=t[n];for(var o=0;o<e.length;o+=1)r[o+t.length]=e[o];return r},Ce=function(t){var e=this;if("function"!=typeof e||"[object Function]"!==Te.apply(e))throw new TypeError("Function.prototype.bind called on incompatible "+e);for(var r,n=function(t,e){for(var r=[],n=e||0,o=0;n<t.length;n+=1,o+=1)r[o]=t[n];return r}(arguments,1),o=Fe(0,e.length-n.length),i=[],a=0;a<o;a++)i[a]="$"+a;if(r=Function("binder","return function ("+function(t,e){for(var r="",n=0;n<t.length;n+=1)r+=t[n],n+1<t.length&&(r+=e);return r}(i,",")+"){ return binder.apply(this,arguments); }")((function(){if(this instanceof r){var o=e.apply(this,xe(n,arguments));return Object(o)===o?o:this}return e.apply(t,xe(n,arguments))})),e.prototype){var u=function(){};u.prototype=e.prototype,r.prototype=new u,u.prototype=null}return r},Ne=Function.prototype.bind||Ce,Ue=Function.prototype.call,Me=Object.prototype.hasOwnProperty,je=Ne.call(Ue,Me),Re=ce,Le=se,Be=pe,De=le,ke=fe,Ge=ye,$e=de,Ve=Function,We=function(t){try{return Ve('"use strict"; return ('+t+").constructor;")()}catch(t){}},Je=Object.getOwnPropertyDescriptor;if(Je)try{Je({},"")}catch(t){Je=null}var ze=function(){throw new Ge},qe=Je?function(){try{return ze}catch(t){try{return Je(arguments,"callee").get}catch(t){return ze}}}():ze,He=ve(),Ye=Ee(),Xe=Object.getPrototypeOf||(Ye?function(t){return t.__proto__}:null),Ze={},Ke="undefined"!=typeof Uint8Array&&Xe?Xe(Uint8Array):ge,Qe={__proto__:null,"%AggregateError%":"undefined"==typeof AggregateError?ge:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?ge:ArrayBuffer,"%ArrayIteratorPrototype%":He&&Xe?Xe([][Symbol.iterator]()):ge,"%AsyncFromSyncIteratorPrototype%":ge,"%AsyncFunction%":Ze,"%AsyncGenerator%":Ze,"%AsyncGeneratorFunction%":Ze,"%AsyncIteratorPrototype%":Ze,"%Atomics%":"undefined"==typeof Atomics?ge:Atomics,"%BigInt%":"undefined"==typeof BigInt?ge:BigInt,"%BigInt64Array%":"undefined"==typeof BigInt64Array?ge:BigInt64Array,"%BigUint64Array%":"undefined"==typeof BigUint64Array?ge:BigUint64Array,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?ge:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Re,"%eval%":eval,"%EvalError%":Le,"%Float32Array%":"undefined"==typeof Float32Array?ge:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?ge:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?ge:FinalizationRegistry,"%Function%":Ve,"%GeneratorFunction%":Ze,"%Int8Array%":"undefined"==typeof Int8Array?ge:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?ge:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?ge:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":He&&Xe?Xe(Xe([][Symbol.iterator]())):ge,"%JSON%":"object"==typeof JSON?JSON:ge,"%Map%":"undefined"==typeof Map?ge:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&He&&Xe?Xe((new Map)[Symbol.iterator]()):ge,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?ge:Promise,"%Proxy%":"undefined"==typeof Proxy?ge:Proxy,"%RangeError%":Be,"%ReferenceError%":De,"%Reflect%":"undefined"==typeof Reflect?ge:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?ge:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&He&&Xe?Xe((new Set)[Symbol.iterator]()):ge,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?ge:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":He&&Xe?Xe(""[Symbol.iterator]()):ge,"%Symbol%":He?Symbol:ge,"%SyntaxError%":ke,"%ThrowTypeError%":qe,"%TypedArray%":Ke,"%TypeError%":Ge,"%Uint8Array%":"undefined"==typeof Uint8Array?ge:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?ge:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?ge:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?ge:Uint32Array,"%URIError%":$e,"%WeakMap%":"undefined"==typeof WeakMap?ge:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?ge:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?ge:WeakSet};if(Xe)try{null.error}catch(t){var tr=Xe(Xe(t));Qe["%Error.prototype%"]=tr}var er,rr,nr=function t(e){var r;if("%AsyncFunction%"===e)r=We("async function () {}");else if("%GeneratorFunction%"===e)r=We("function* () {}");else if("%AsyncGeneratorFunction%"===e)r=We("async function* () {}");else if("%AsyncGenerator%"===e){var n=t("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if("%AsyncIteratorPrototype%"===e){var o=t("%AsyncGenerator%");o&&Xe&&(r=Xe(o.prototype))}return Qe[e]=r,r},or={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},ir=Oe,ar=je,ur=ir.call(Function.call,Array.prototype.concat),cr=ir.call(Function.apply,Array.prototype.splice),sr=ir.call(Function.call,String.prototype.replace),pr=ir.call(Function.call,String.prototype.slice),lr=ir.call(Function.call,RegExp.prototype.exec),fr=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,yr=/\\(\\)?/g,dr=function(t,e){var r,n=t;if(ar(or,n)&&(n="%"+(r=or[n])[0]+"%"),ar(Qe,n)){var o=Qe[n];if(o===Ze&&(o=nr(n)),void 0===o&&!e)throw new Ge("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:r,name:n,value:o}}throw new ke("intrinsic "+t+" does not exist!")},hr=function(t,e){if("string"!=typeof t||0===t.length)throw new Ge("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof e)throw new Ge('"allowMissing" argument must be a boolean');if(null===lr(/^%?[^%]*%?$/,t))throw new ke("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var r=function(t){var e=pr(t,0,1),r=pr(t,-1);if("%"===e&&"%"!==r)throw new ke("invalid intrinsic syntax, expected closing `%`");if("%"===r&&"%"!==e)throw new ke("invalid intrinsic syntax, expected opening `%`");var n=[];return sr(t,fr,(function(t,e,r,o){n[n.length]=r?sr(o,yr,"$1"):e||t})),n}(t),n=r.length>0?r[0]:"",o=dr("%"+n+"%",e),i=o.name,a=o.value,u=!1,c=o.alias;c&&(n=c[0],cr(r,ur([0,1],c)));for(var s=1,p=!0;s<r.length;s+=1){var l=r[s],f=pr(l,0,1),y=pr(l,-1);if(('"'===f||"'"===f||"`"===f||'"'===y||"'"===y||"`"===y)&&f!==y)throw new ke("property names with quotes must have matching quotes");if("constructor"!==l&&p||(u=!0),ar(Qe,i="%"+(n+="."+l)+"%"))a=Qe[i];else if(null!=a){if(!(l in a)){if(!e)throw new Ge("base intrinsic for "+t+" exists, but the property is not available.");return}if(Je&&s+1>=r.length){var d=Je(a,l);a=(p=!!d)&&"get"in d&&!("originalValue"in d.get)?d.get:a[l]}else p=ar(a,l),a=a[l];p&&!u&&(Qe[i]=a)}}return a};function gr(){if(rr)return er;rr=1;var t=hr("%Object.defineProperty%",!0)||!1;if(t)try{t({},"a",{value:1})}catch(e){t=!1}return er=t}var br,mr=Array.prototype.slice,vr=Object.prototype.toString,Ar=function(t){var e=this;if("function"!=typeof e||"[object Function]"!==vr.call(e))throw new TypeError("Function.prototype.bind called on incompatible "+e);for(var r,n=mr.call(arguments,1),o=Math.max(0,e.length-n.length),i=[],a=0;a<o;a++)i.push("$"+a);if(r=Function("binder","return function ("+i.join(",")+"){ return binder.apply(this,arguments); }")((function(){if(this instanceof r){var o=e.apply(this,n.concat(mr.call(arguments)));return Object(o)===o?o:this}return e.apply(t,n.concat(mr.call(arguments)))})),e.prototype){var u=function(){};u.prototype=e.prototype,r.prototype=new u,u.prototype=null}return r},Sr=Function.prototype.bind||Ar,Er=Sr.call(Function.call,Object.prototype.hasOwnProperty),wr=SyntaxError,_r=Function,Ir=TypeError,Pr=function(t){try{return _r('"use strict"; return ('+t+").constructor;")()}catch(t){}},Or=Object.getOwnPropertyDescriptor;if(Or)try{Or({},"")}catch(t){Or=null}var Tr=function(){throw new Ir},Fr=Or?function(){try{return Tr}catch(t){try{return Or(arguments,"callee").get}catch(t){return Tr}}}():Tr,xr=ve(),Cr=Object.getPrototypeOf||function(t){return t.__proto__},Nr={},Ur="undefined"==typeof Uint8Array?br:Cr(Uint8Array),Mr={"%AggregateError%":"undefined"==typeof AggregateError?br:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?br:ArrayBuffer,"%ArrayIteratorPrototype%":xr?Cr([][Symbol.iterator]()):br,"%AsyncFromSyncIteratorPrototype%":br,"%AsyncFunction%":Nr,"%AsyncGenerator%":Nr,"%AsyncGeneratorFunction%":Nr,"%AsyncIteratorPrototype%":Nr,"%Atomics%":"undefined"==typeof Atomics?br:Atomics,"%BigInt%":"undefined"==typeof BigInt?br:BigInt,"%BigInt64Array%":"undefined"==typeof BigInt64Array?br:BigInt64Array,"%BigUint64Array%":"undefined"==typeof BigUint64Array?br:BigUint64Array,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?br:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"==typeof Float32Array?br:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?br:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?br:FinalizationRegistry,"%Function%":_r,"%GeneratorFunction%":Nr,"%Int8Array%":"undefined"==typeof Int8Array?br:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?br:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?br:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":xr?Cr(Cr([][Symbol.iterator]())):br,"%JSON%":"object"==typeof JSON?JSON:br,"%Map%":"undefined"==typeof Map?br:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&xr?Cr((new Map)[Symbol.iterator]()):br,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?br:Promise,"%Proxy%":"undefined"==typeof Proxy?br:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"==typeof Reflect?br:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?br:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&xr?Cr((new Set)[Symbol.iterator]()):br,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?br:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":xr?Cr(""[Symbol.iterator]()):br,"%Symbol%":xr?Symbol:br,"%SyntaxError%":wr,"%ThrowTypeError%":Fr,"%TypedArray%":Ur,"%TypeError%":Ir,"%Uint8Array%":"undefined"==typeof Uint8Array?br:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?br:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?br:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?br:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"==typeof WeakMap?br:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?br:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?br:WeakSet};try{null.error}catch(t){var jr=Cr(Cr(t));Mr["%Error.prototype%"]=jr}var Rr=function t(e){var r;if("%AsyncFunction%"===e)r=Pr("async function () {}");else if("%GeneratorFunction%"===e)r=Pr("function* () {}");else if("%AsyncGeneratorFunction%"===e)r=Pr("async function* () {}");else if("%AsyncGenerator%"===e){var n=t("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if("%AsyncIteratorPrototype%"===e){var o=t("%AsyncGenerator%");o&&(r=Cr(o.prototype))}return Mr[e]=r,r},Lr={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Br=Sr,Dr=Er,kr=Br.call(Function.call,Array.prototype.concat),Gr=Br.call(Function.apply,Array.prototype.splice),$r=Br.call(Function.call,String.prototype.replace),Vr=Br.call(Function.call,String.prototype.slice),Wr=Br.call(Function.call,RegExp.prototype.exec),Jr=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,zr=/\\(\\)?/g,qr=function(t,e){var r,n=t;if(Dr(Lr,n)&&(n="%"+(r=Lr[n])[0]+"%"),Dr(Mr,n)){var o=Mr[n];if(o===Nr&&(o=Rr(n)),void 0===o&&!e)throw new Ir("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:r,name:n,value:o}}throw new wr("intrinsic "+t+" does not exist!")},Hr=function(t,e){if("string"!=typeof t||0===t.length)throw new Ir("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof e)throw new Ir('"allowMissing" argument must be a boolean');if(null===Wr(/^%?[^%]*%?$/,t))throw new wr("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var r=function(t){var e=Vr(t,0,1),r=Vr(t,-1);if("%"===e&&"%"!==r)throw new wr("invalid intrinsic syntax, expected closing `%`");if("%"===r&&"%"!==e)throw new wr("invalid intrinsic syntax, expected opening `%`");var n=[];return $r(t,Jr,(function(t,e,r,o){n[n.length]=r?$r(o,zr,"$1"):e||t})),n}(t),n=r.length>0?r[0]:"",o=qr("%"+n+"%",e),i=o.name,a=o.value,u=!1,c=o.alias;c&&(n=c[0],Gr(r,kr([0,1],c)));for(var s=1,p=!0;s<r.length;s+=1){var l=r[s],f=Vr(l,0,1),y=Vr(l,-1);if(('"'===f||"'"===f||"`"===f||'"'===y||"'"===y||"`"===y)&&f!==y)throw new wr("property names with quotes must have matching quotes");if("constructor"!==l&&p||(u=!0),Dr(Mr,i="%"+(n+="."+l)+"%"))a=Mr[i];else if(null!=a){if(!(l in a)){if(!e)throw new Ir("base intrinsic for "+t+" exists, but the property is not available.");return}if(Or&&s+1>=r.length){var d=Or(a,l);a=(p=!!d)&&"get"in d&&!("originalValue"in d.get)?d.get:a[l]}else p=Dr(a,l),a=a[l];p&&!u&&(Mr[i]=a)}}return a},Yr=Hr("%Object.getOwnPropertyDescriptor%",!0);if(Yr)try{Yr([],"length")}catch(t){Yr=null}var Xr=Yr,Zr=gr(),Kr=fe,Qr=ye,tn=Xr,en=gr(),rn=function(){return!!en};rn.hasArrayLengthDefineBug=function(){if(!en)return null;try{return 1!==en([],"length",{value:1}).length}catch(t){return!0}};var nn=hr,on=function(t,e,r){if(!t||"object"!=typeof t&&"function"!=typeof t)throw new Qr("`obj` must be an object or a function`");if("string"!=typeof e&&"symbol"!=typeof e)throw new Qr("`property` must be a string or a symbol`");if(arguments.length>3&&"boolean"!=typeof arguments[3]&&null!==arguments[3])throw new Qr("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&"boolean"!=typeof arguments[4]&&null!==arguments[4])throw new Qr("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&"boolean"!=typeof arguments[5]&&null!==arguments[5])throw new Qr("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&"boolean"!=typeof arguments[6])throw new Qr("`loose`, if provided, must be a boolean");var n=arguments.length>3?arguments[3]:null,o=arguments.length>4?arguments[4]:null,i=arguments.length>5?arguments[5]:null,a=arguments.length>6&&arguments[6],u=!!tn&&tn(t,e);if(Zr)Zr(t,e,{configurable:null===i&&u?u.configurable:!i,enumerable:null===n&&u?u.enumerable:!n,value:r,writable:null===o&&u?u.writable:!o});else{if(!a&&(n||o||i))throw new Kr("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.");t[e]=r}},an=rn(),un=Xr,cn=ye,sn=nn("%Math.floor%"),pn=function(t,e){if("function"!=typeof t)throw new cn("`fn` is not a function");if("number"!=typeof e||e<0||e>4294967295||sn(e)!==e)throw new cn("`length` must be a positive 32-bit integer");var r=arguments.length>2&&!!arguments[2],n=!0,o=!0;if("length"in t&&un){var i=un(t,"length");i&&!i.configurable&&(n=!1),i&&!i.writable&&(o=!1)}return(n||o||!r)&&(an?on(t,"length",e,!0,!0):on(t,"length",e)),t};!function(t){var e=ue,r=hr,n=pn,o=ye,i=r("%Function.prototype.apply%"),a=r("%Function.prototype.call%"),u=r("%Reflect.apply%",!0)||e.call(a,i),c=gr(),s=r("%Math.max%");t.exports=function(t){if("function"!=typeof t)throw new o("a function is required");var r=u(e,a,arguments);return n(r,1+s(0,t.length-(arguments.length-1)),!0)};var p=function(){return u(e,i,arguments)};c?c(t.exports,"apply",{value:p}):t.exports.apply=p}(re);var ln,fn,yn=re.exports,dn=hr,hn=yn,gn=hn(dn("String.prototype.indexOf")),bn=function(t,e){var r=dn(t,!!e);return"function"==typeof r&&gn(t,".prototype.")>-1?hn(r):r};var mn=Kt,vn=function(){for(var t=[],e=0;e<te.length;e++)"function"==typeof ee[te[e]]&&(t[t.length]=te[e]);return t},An=yn,Sn=bn,En=Xr,wn=Sn("Object.prototype.toString"),_n=function(){if(fn)return ln;fn=1;var t=he();return ln=function(){return t()&&!!Symbol.toStringTag}}()(),In="undefined"==typeof globalThis?global:globalThis,Pn=vn(),On=Sn("String.prototype.slice"),Tn=Object.getPrototypeOf,Fn=Sn("Array.prototype.indexOf",!0)||function(t,e){for(var r=0;r<t.length;r+=1)if(t[r]===e)return r;return-1},xn={__proto__:null};mn(Pn,_n&&En&&Tn?function(t){var e=new In[t];if(Symbol.toStringTag in e){var r=Tn(e),n=En(r,Symbol.toStringTag);if(!n){var o=Tn(r);n=En(o,Symbol.toStringTag)}xn["$"+t]=An(n.get)}}:function(t){var e=new In[t],r=e.slice||e.set;r&&(xn["$"+t]=An(r))});var Cn,Nn,Un=function(t){if(!t||"object"!=typeof t)return!1;if(!_n){var e=On(wn(t),8,-1);return Fn(Pn,e)>-1?e:"Object"===e&&function(t){var e=!1;return mn(xn,(function(r,n){if(!e)try{r(t),e=On(n,1)}catch(t){}})),e}(t)}return En?function(t){var e=!1;return mn(xn,(function(r,n){if(!e)try{"$"+r(t)===n&&(e=On(n,1))}catch(t){}})),e}(t):null},Mn=Object.prototype.toString,jn=function(t){var e=Mn.call(t),r="[object Arguments]"===e;return r||(r="[object Array]"!==e&&null!==t&&"object"==typeof t&&"number"==typeof t.length&&t.length>=0&&"[object Function]"===Mn.call(t.callee)),r};var Rn=Array.prototype.slice,Ln=jn,Bn=Object.keys,Dn=Bn?function(t){return Bn(t)}:function(){if(Nn)return Cn;var t;if(Nn=1,!Object.keys){var e=Object.prototype.hasOwnProperty,r=Object.prototype.toString,n=jn,o=Object.prototype.propertyIsEnumerable,i=!o.call({toString:null},"toString"),a=o.call((function(){}),"prototype"),u=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],c=function(t){var e=t.constructor;return e&&e.prototype===t},s={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},p=function(){if("undefined"==typeof window)return!1;for(var t in window)try{if(!s["$"+t]&&e.call(window,t)&&null!==window[t]&&"object"==typeof window[t])try{c(window[t])}catch(t){return!0}}catch(t){return!0}return!1}();t=function(t){var o=null!==t&&"object"==typeof t,s="[object Function]"===r.call(t),l=n(t),f=o&&"[object String]"===r.call(t),y=[];if(!o&&!s&&!l)throw new TypeError("Object.keys called on a non-object");var d=a&&s;if(f&&t.length>0&&!e.call(t,0))for(var h=0;h<t.length;++h)y.push(String(h));if(l&&t.length>0)for(var g=0;g<t.length;++g)y.push(String(g));else for(var b in t)d&&"prototype"===b||!e.call(t,b)||y.push(String(b));if(i)for(var m=function(t){if("undefined"==typeof window||!p)return c(t);try{return c(t)}catch(t){return!1}}(t),v=0;v<u.length;++v)m&&"constructor"===u[v]||!e.call(t,u[v])||y.push(u[v]);return y}}return Cn=t}(),kn=Object.keys;Dn.shim=function(){if(Object.keys){var t=function(){var t=Object.keys(arguments);return t&&t.length===arguments.length}(1,2);t||(Object.keys=function(t){return Ln(t)?kn(Rn.call(t)):kn(t)})}else Object.keys=Dn;return Object.keys||Dn};var Gn,$n=Dn,Vn=SyntaxError,Wn=Function,Jn=TypeError,zn=function(t){try{return Wn('"use strict"; return ('+t+").constructor;")()}catch(t){}},qn=Object.getOwnPropertyDescriptor;if(qn)try{qn({},"")}catch(t){qn=null}var Hn=function(){throw new Jn},Yn=qn?function(){try{return Hn}catch(t){try{return qn(arguments,"callee").get}catch(t){return Hn}}}():Hn,Xn=ve(),Zn=Object.getPrototypeOf||function(t){return t.__proto__},Kn={},Qn="undefined"==typeof Uint8Array?Gn:Zn(Uint8Array),to={"%AggregateError%":"undefined"==typeof AggregateError?Gn:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?Gn:ArrayBuffer,"%ArrayIteratorPrototype%":Xn?Zn([][Symbol.iterator]()):Gn,"%AsyncFromSyncIteratorPrototype%":Gn,"%AsyncFunction%":Kn,"%AsyncGenerator%":Kn,"%AsyncGeneratorFunction%":Kn,"%AsyncIteratorPrototype%":Kn,"%Atomics%":"undefined"==typeof Atomics?Gn:Atomics,"%BigInt%":"undefined"==typeof BigInt?Gn:BigInt,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?Gn:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"==typeof Float32Array?Gn:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?Gn:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?Gn:FinalizationRegistry,"%Function%":Wn,"%GeneratorFunction%":Kn,"%Int8Array%":"undefined"==typeof Int8Array?Gn:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?Gn:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?Gn:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Xn?Zn(Zn([][Symbol.iterator]())):Gn,"%JSON%":"object"==typeof JSON?JSON:Gn,"%Map%":"undefined"==typeof Map?Gn:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&Xn?Zn((new Map)[Symbol.iterator]()):Gn,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?Gn:Promise,"%Proxy%":"undefined"==typeof Proxy?Gn:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"==typeof Reflect?Gn:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?Gn:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&Xn?Zn((new Set)[Symbol.iterator]()):Gn,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?Gn:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Xn?Zn(""[Symbol.iterator]()):Gn,"%Symbol%":Xn?Symbol:Gn,"%SyntaxError%":Vn,"%ThrowTypeError%":Yn,"%TypedArray%":Qn,"%TypeError%":Jn,"%Uint8Array%":"undefined"==typeof Uint8Array?Gn:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?Gn:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?Gn:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?Gn:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"==typeof WeakMap?Gn:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?Gn:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?Gn:WeakSet},eo=function t(e){var r;if("%AsyncFunction%"===e)r=zn("async function () {}");else if("%GeneratorFunction%"===e)r=zn("function* () {}");else if("%AsyncGeneratorFunction%"===e)r=zn("async function* () {}");else if("%AsyncGenerator%"===e){var n=t("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if("%AsyncIteratorPrototype%"===e){var o=t("%AsyncGenerator%");o&&(r=Zn(o.prototype))}return to[e]=r,r},ro={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},no=Sr,oo=Er,io=no.call(Function.call,Array.prototype.concat),ao=no.call(Function.apply,Array.prototype.splice),uo=no.call(Function.call,String.prototype.replace),co=no.call(Function.call,String.prototype.slice),so=no.call(Function.call,RegExp.prototype.exec),po=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,lo=/\\(\\)?/g,fo=function(t,e){var r,n=t;if(oo(ro,n)&&(n="%"+(r=ro[n])[0]+"%"),oo(to,n)){var o=to[n];if(o===Kn&&(o=eo(n)),void 0===o&&!e)throw new Jn("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:r,name:n,value:o}}throw new Vn("intrinsic "+t+" does not exist!")},yo=function(t,e){if("string"!=typeof t||0===t.length)throw new Jn("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof e)throw new Jn('"allowMissing" argument must be a boolean');if(null===so(/^%?[^%]*%?$/g,t))throw new Vn("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var r=function(t){var e=co(t,0,1),r=co(t,-1);if("%"===e&&"%"!==r)throw new Vn("invalid intrinsic syntax, expected closing `%`");if("%"===r&&"%"!==e)throw new Vn("invalid intrinsic syntax, expected opening `%`");var n=[];return uo(t,po,(function(t,e,r,o){n[n.length]=r?uo(o,lo,"$1"):e||t})),n}(t),n=r.length>0?r[0]:"",o=fo("%"+n+"%",e),i=o.name,a=o.value,u=!1,c=o.alias;c&&(n=c[0],ao(r,io([0,1],c)));for(var s=1,p=!0;s<r.length;s+=1){var l=r[s],f=co(l,0,1),y=co(l,-1);if(('"'===f||"'"===f||"`"===f||'"'===y||"'"===y||"`"===y)&&f!==y)throw new Vn("property names with quotes must have matching quotes");if("constructor"!==l&&p||(u=!0),oo(to,i="%"+(n+="."+l)+"%"))a=to[i];else if(null!=a){if(!(l in a)){if(!e)throw new Jn("base intrinsic for "+t+" exists, but the property is not available.");return}if(qn&&s+1>=r.length){var d=qn(a,l);a=(p=!!d)&&"get"in d&&!("originalValue"in d.get)?d.get:a[l]}else p=oo(a,l),a=a[l];p&&!u&&(to[i]=a)}}return a},ho=yo("%Object.defineProperty%",!0),go=function(){if(ho)try{return ho({},"a",{value:1}),!0}catch(t){return!1}return!1};go.hasArrayLengthDefineBug=function(){if(!go())return null;try{return 1!==ho([],"length",{value:1}).length}catch(t){return!0}};var bo,mo=go,vo=SyntaxError,Ao=Function,So=TypeError,Eo=function(t){try{return Ao('"use strict"; return ('+t+").constructor;")()}catch(t){}},wo=Object.getOwnPropertyDescriptor;if(wo)try{wo({},"")}catch(t){wo=null}var _o=function(){throw new So},Io=wo?function(){try{return _o}catch(t){try{return wo(arguments,"callee").get}catch(t){return _o}}}():_o,Po=ve(),Oo=Ee(),To=Object.getPrototypeOf||(Oo?function(t){return t.__proto__}:null),Fo={},xo="undefined"!=typeof Uint8Array&&To?To(Uint8Array):bo,Co={"%AggregateError%":"undefined"==typeof AggregateError?bo:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?bo:ArrayBuffer,"%ArrayIteratorPrototype%":Po&&To?To([][Symbol.iterator]()):bo,"%AsyncFromSyncIteratorPrototype%":bo,"%AsyncFunction%":Fo,"%AsyncGenerator%":Fo,"%AsyncGeneratorFunction%":Fo,"%AsyncIteratorPrototype%":Fo,"%Atomics%":"undefined"==typeof Atomics?bo:Atomics,"%BigInt%":"undefined"==typeof BigInt?bo:BigInt,"%BigInt64Array%":"undefined"==typeof BigInt64Array?bo:BigInt64Array,"%BigUint64Array%":"undefined"==typeof BigUint64Array?bo:BigUint64Array,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?bo:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"==typeof Float32Array?bo:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?bo:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?bo:FinalizationRegistry,"%Function%":Ao,"%GeneratorFunction%":Fo,"%Int8Array%":"undefined"==typeof Int8Array?bo:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?bo:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?bo:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Po&&To?To(To([][Symbol.iterator]())):bo,"%JSON%":"object"==typeof JSON?JSON:bo,"%Map%":"undefined"==typeof Map?bo:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&Po&&To?To((new Map)[Symbol.iterator]()):bo,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?bo:Promise,"%Proxy%":"undefined"==typeof Proxy?bo:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"==typeof Reflect?bo:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?bo:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&Po&&To?To((new Set)[Symbol.iterator]()):bo,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?bo:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Po&&To?To(""[Symbol.iterator]()):bo,"%Symbol%":Po?Symbol:bo,"%SyntaxError%":vo,"%ThrowTypeError%":Io,"%TypedArray%":xo,"%TypeError%":So,"%Uint8Array%":"undefined"==typeof Uint8Array?bo:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?bo:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?bo:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?bo:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"==typeof WeakMap?bo:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?bo:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?bo:WeakSet};if(To)try{null.error}catch(t){var No=To(To(t));Co["%Error.prototype%"]=No}var Uo=function t(e){var r;if("%AsyncFunction%"===e)r=Eo("async function () {}");else if("%GeneratorFunction%"===e)r=Eo("function* () {}");else if("%AsyncGeneratorFunction%"===e)r=Eo("async function* () {}");else if("%AsyncGenerator%"===e){var n=t("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if("%AsyncIteratorPrototype%"===e){var o=t("%AsyncGenerator%");o&&To&&(r=To(o.prototype))}return Co[e]=r,r},Mo={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},jo=Sr,Ro=Er,Lo=jo.call(Function.call,Array.prototype.concat),Bo=jo.call(Function.apply,Array.prototype.splice),Do=jo.call(Function.call,String.prototype.replace),ko=jo.call(Function.call,String.prototype.slice),Go=jo.call(Function.call,RegExp.prototype.exec),$o=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,Vo=/\\(\\)?/g,Wo=function(t,e){var r,n=t;if(Ro(Mo,n)&&(n="%"+(r=Mo[n])[0]+"%"),Ro(Co,n)){var o=Co[n];if(o===Fo&&(o=Uo(n)),void 0===o&&!e)throw new So("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:r,name:n,value:o}}throw new vo("intrinsic "+t+" does not exist!")},Jo=function(t,e){if("string"!=typeof t||0===t.length)throw new So("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof e)throw new So('"allowMissing" argument must be a boolean');if(null===Go(/^%?[^%]*%?$/,t))throw new vo("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var r=function(t){var e=ko(t,0,1),r=ko(t,-1);if("%"===e&&"%"!==r)throw new vo("invalid intrinsic syntax, expected closing `%`");if("%"===r&&"%"!==e)throw new vo("invalid intrinsic syntax, expected opening `%`");var n=[];return Do(t,$o,(function(t,e,r,o){n[n.length]=r?Do(o,Vo,"$1"):e||t})),n}(t),n=r.length>0?r[0]:"",o=Wo("%"+n+"%",e),i=o.name,a=o.value,u=!1,c=o.alias;c&&(n=c[0],Bo(r,Lo([0,1],c)));for(var s=1,p=!0;s<r.length;s+=1){var l=r[s],f=ko(l,0,1),y=ko(l,-1);if(('"'===f||"'"===f||"`"===f||'"'===y||"'"===y||"`"===y)&&f!==y)throw new vo("property names with quotes must have matching quotes");if("constructor"!==l&&p||(u=!0),Ro(Co,i="%"+(n+="."+l)+"%"))a=Co[i];else if(null!=a){if(!(l in a)){if(!e)throw new So("base intrinsic for "+t+" exists, but the property is not available.");return}if(wo&&s+1>=r.length){var d=wo(a,l);a=(p=!!d)&&"get"in d&&!("originalValue"in d.get)?d.get:a[l]}else p=Ro(a,l),a=a[l];p&&!u&&(Co[i]=a)}}return a},zo=mo()&&Jo("%Object.defineProperty%",!0),qo=Jo("%SyntaxError%"),Ho=Jo("%TypeError%"),Yo=Xr,Xo=$n,Zo="function"==typeof Symbol&&"symbol"==typeof Symbol("foo"),Ko=Object.prototype.toString,Qo=Array.prototype.concat,ti=function(t,e,r){if(!t||"object"!=typeof t&&"function"!=typeof t)throw new Ho("`obj` must be an object or a function`");if("string"!=typeof e&&"symbol"!=typeof e)throw new Ho("`property` must be a string or a symbol`");if(arguments.length>3&&"boolean"!=typeof arguments[3]&&null!==arguments[3])throw new Ho("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&"boolean"!=typeof arguments[4]&&null!==arguments[4])throw new Ho("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&"boolean"!=typeof arguments[5]&&null!==arguments[5])throw new Ho("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&"boolean"!=typeof arguments[6])throw new Ho("`loose`, if provided, must be a boolean");var n=arguments.length>3?arguments[3]:null,o=arguments.length>4?arguments[4]:null,i=arguments.length>5?arguments[5]:null,a=arguments.length>6&&arguments[6],u=!!Yo&&Yo(t,e);if(zo)zo(t,e,{configurable:null===i&&u?u.configurable:!i,enumerable:null===n&&u?u.enumerable:!n,value:r,writable:null===o&&u?u.writable:!o});else{if(!a&&(n||o||i))throw new qo("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.");t[e]=r}},ei=mo(),ri=function(t,e,r,n){if(e in t)if(!0===n){if(t[e]===r)return}else if("function"!=typeof(o=n)||"[object Function]"!==Ko.call(o)||!n())return;var o;ei?ti(t,e,r,!0):ti(t,e,r)},ni=function(t,e){var r=arguments.length>2?arguments[2]:{},n=Xo(e);Zo&&(n=Qo.call(n,Object.getOwnPropertySymbols(e)));for(var o=0;o<n.length;o+=1)ri(t,n[o],e[n[o]],r[n[o]])};ni.supportsDescriptors=!!ei;var oi=ni,ii=r(Object.freeze({__proto__:null,default:{}})),ai="function"==typeof Map&&Map.prototype,ui=Object.getOwnPropertyDescriptor&&ai?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,ci=ai&&ui&&"function"==typeof ui.get?ui.get:null,si=ai&&Map.prototype.forEach,pi="function"==typeof Set&&Set.prototype,li=Object.getOwnPropertyDescriptor&&pi?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,fi=pi&&li&&"function"==typeof li.get?li.get:null,yi=pi&&Set.prototype.forEach,di="function"==typeof WeakMap&&WeakMap.prototype?WeakMap.prototype.has:null,hi="function"==typeof WeakSet&&WeakSet.prototype?WeakSet.prototype.has:null,gi="function"==typeof WeakRef&&WeakRef.prototype?WeakRef.prototype.deref:null,bi=Boolean.prototype.valueOf,mi=Object.prototype.toString,vi=Function.prototype.toString,Ai=String.prototype.match,Si=String.prototype.slice,Ei=String.prototype.replace,wi=String.prototype.toUpperCase,_i=String.prototype.toLowerCase,Ii=RegExp.prototype.test,Pi=Array.prototype.concat,Oi=Array.prototype.join,Ti=Array.prototype.slice,Fi=Math.floor,xi="function"==typeof BigInt?BigInt.prototype.valueOf:null,Ci=Object.getOwnPropertySymbols,Ni="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?Symbol.prototype.toString:null,Ui="function"==typeof Symbol&&"object"==typeof Symbol.iterator,Mi="function"==typeof Symbol&&Symbol.toStringTag&&(typeof Symbol.toStringTag===Ui||"symbol")?Symbol.toStringTag:null,ji=Object.prototype.propertyIsEnumerable,Ri=("function"==typeof Reflect?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(t){return t.__proto__}:null);function Li(t,e){if(t===1/0||t===-1/0||t!=t||t&&t>-1e3&&t<1e3||Ii.call(/e/,e))return e;var r=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if("number"==typeof t){var n=t<0?-Fi(-t):Fi(t);if(n!==t){var o=String(n),i=Si.call(e,o.length+1);return Ei.call(o,r,"$&_")+"."+Ei.call(Ei.call(i,/([0-9]{3})/g,"$&_"),/_$/,"")}}return Ei.call(e,r,"$&_")}var Bi=ii,Di=Bi.custom,ki=Ji(Di)?Di:null;function Gi(t,e,r){var n="double"===(r.quoteStyle||e)?'"':"'";return n+t+n}function $i(t){return Ei.call(String(t),/"/g,"&quot;")}function Vi(t){return!("[object Array]"!==Hi(t)||Mi&&"object"==typeof t&&Mi in t)}function Wi(t){return!("[object RegExp]"!==Hi(t)||Mi&&"object"==typeof t&&Mi in t)}function Ji(t){if(Ui)return t&&"object"==typeof t&&t instanceof Symbol;if("symbol"==typeof t)return!0;if(!t||"object"!=typeof t||!Ni)return!1;try{return Ni.call(t),!0}catch(t){}return!1}var zi=Object.prototype.hasOwnProperty||function(t){return t in this};function qi(t,e){return zi.call(t,e)}function Hi(t){return mi.call(t)}function Yi(t,e){if(t.indexOf)return t.indexOf(e);for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}function Xi(t,e){if(t.length>e.maxStringLength){var r=t.length-e.maxStringLength,n="... "+r+" more character"+(r>1?"s":"");return Xi(Si.call(t,0,e.maxStringLength),e)+n}return Gi(Ei.call(Ei.call(t,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,Zi),"single",e)}function Zi(t){var e=t.charCodeAt(0),r={8:"b",9:"t",10:"n",12:"f",13:"r"}[e];return r?"\\"+r:"\\x"+(e<16?"0":"")+wi.call(e.toString(16))}function Ki(t){return"Object("+t+")"}function Qi(t){return t+" { ? }"}function ta(t,e,r,n){return t+" ("+e+") {"+(n?ea(r,n):Oi.call(r,", "))+"}"}function ea(t,e){if(0===t.length)return"";var r="\n"+e.prev+e.base;return r+Oi.call(t,","+r)+"\n"+e.prev}function ra(t,e){var r=Vi(t),n=[];if(r){n.length=t.length;for(var o=0;o<t.length;o++)n[o]=qi(t,o)?e(t[o],t):""}var i,a="function"==typeof Ci?Ci(t):[];if(Ui){i={};for(var u=0;u<a.length;u++)i["$"+a[u]]=a[u]}for(var c in t)qi(t,c)&&(r&&String(Number(c))===c&&c<t.length||Ui&&i["$"+c]instanceof Symbol||(Ii.call(/[^\w$]/,c)?n.push(e(c,t)+": "+e(t[c],t)):n.push(c+": "+e(t[c],t))));if("function"==typeof Ci)for(var s=0;s<a.length;s++)ji.call(t,a[s])&&n.push("["+e(a[s])+"]: "+e(t[a[s]],t));return n}var na,oa=function(t){return"string"==typeof t||"symbol"==typeof t},ia=function(t){return null===t?"Null":void 0===t?"Undefined":"function"==typeof t||"object"==typeof t?"Object":"number"==typeof t?"Number":"boolean"==typeof t?"Boolean":"string"==typeof t?"String":void 0},aa=function(t){return"symbol"==typeof t?"Symbol":"bigint"==typeof t?"BigInt":ia(t)},ua=ye,ca=function t(e,r,n,o){var i=r||{};if(qi(i,"quoteStyle")&&"single"!==i.quoteStyle&&"double"!==i.quoteStyle)throw new TypeError('option "quoteStyle" must be "single" or "double"');if(qi(i,"maxStringLength")&&("number"==typeof i.maxStringLength?i.maxStringLength<0&&i.maxStringLength!==1/0:null!==i.maxStringLength))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var a=!qi(i,"customInspect")||i.customInspect;if("boolean"!=typeof a&&"symbol"!==a)throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(qi(i,"indent")&&null!==i.indent&&"\t"!==i.indent&&!(parseInt(i.indent,10)===i.indent&&i.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(qi(i,"numericSeparator")&&"boolean"!=typeof i.numericSeparator)throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var u=i.numericSeparator;if(void 0===e)return"undefined";if(null===e)return"null";if("boolean"==typeof e)return e?"true":"false";if("string"==typeof e)return Xi(e,i);if("number"==typeof e){if(0===e)return 1/0/e>0?"0":"-0";var c=String(e);return u?Li(e,c):c}if("bigint"==typeof e){var s=String(e)+"n";return u?Li(e,s):s}var p=void 0===i.depth?5:i.depth;if(void 0===n&&(n=0),n>=p&&p>0&&"object"==typeof e)return Vi(e)?"[Array]":"[Object]";var l=function(t,e){var r;if("\t"===t.indent)r="\t";else{if(!("number"==typeof t.indent&&t.indent>0))return null;r=Oi.call(Array(t.indent+1)," ")}return{base:r,prev:Oi.call(Array(e+1),r)}}(i,n);if(void 0===o)o=[];else if(Yi(o,e)>=0)return"[Circular]";function f(e,r,a){if(r&&(o=Ti.call(o)).push(r),a){var u={depth:i.depth};return qi(i,"quoteStyle")&&(u.quoteStyle=i.quoteStyle),t(e,u,n+1,o)}return t(e,i,n+1,o)}if("function"==typeof e&&!Wi(e)){var y=function(t){if(t.name)return t.name;var e=Ai.call(vi.call(t),/^function\s*([\w$]+)/);if(e)return e[1];return null}(e),d=ra(e,f);return"[Function"+(y?": "+y:" (anonymous)")+"]"+(d.length>0?" { "+Oi.call(d,", ")+" }":"")}if(Ji(e)){var h=Ui?Ei.call(String(e),/^(Symbol\(.*\))_[^)]*$/,"$1"):Ni.call(e);return"object"!=typeof e||Ui?h:Ki(h)}if(function(t){if(!t||"object"!=typeof t)return!1;if("undefined"!=typeof HTMLElement&&t instanceof HTMLElement)return!0;return"string"==typeof t.nodeName&&"function"==typeof t.getAttribute}(e)){for(var g="<"+_i.call(String(e.nodeName)),b=e.attributes||[],m=0;m<b.length;m++)g+=" "+b[m].name+"="+Gi($i(b[m].value),"double",i);return g+=">",e.childNodes&&e.childNodes.length&&(g+="..."),g+="</"+_i.call(String(e.nodeName))+">"}if(Vi(e)){if(0===e.length)return"[]";var v=ra(e,f);return l&&!function(t){for(var e=0;e<t.length;e++)if(Yi(t[e],"\n")>=0)return!1;return!0}(v)?"["+ea(v,l)+"]":"[ "+Oi.call(v,", ")+" ]"}if(function(t){return!("[object Error]"!==Hi(t)||Mi&&"object"==typeof t&&Mi in t)}(e)){var A=ra(e,f);return"cause"in Error.prototype||!("cause"in e)||ji.call(e,"cause")?0===A.length?"["+String(e)+"]":"{ ["+String(e)+"] "+Oi.call(A,", ")+" }":"{ ["+String(e)+"] "+Oi.call(Pi.call("[cause]: "+f(e.cause),A),", ")+" }"}if("object"==typeof e&&a){if(ki&&"function"==typeof e[ki]&&Bi)return Bi(e,{depth:p-n});if("symbol"!==a&&"function"==typeof e.inspect)return e.inspect()}if(function(t){if(!ci||!t||"object"!=typeof t)return!1;try{ci.call(t);try{fi.call(t)}catch(t){return!0}return t instanceof Map}catch(t){}return!1}(e)){var S=[];return si&&si.call(e,(function(t,r){S.push(f(r,e,!0)+" => "+f(t,e))})),ta("Map",ci.call(e),S,l)}if(function(t){if(!fi||!t||"object"!=typeof t)return!1;try{fi.call(t);try{ci.call(t)}catch(t){return!0}return t instanceof Set}catch(t){}return!1}(e)){var E=[];return yi&&yi.call(e,(function(t){E.push(f(t,e))})),ta("Set",fi.call(e),E,l)}if(function(t){if(!di||!t||"object"!=typeof t)return!1;try{di.call(t,di);try{hi.call(t,hi)}catch(t){return!0}return t instanceof WeakMap}catch(t){}return!1}(e))return Qi("WeakMap");if(function(t){if(!hi||!t||"object"!=typeof t)return!1;try{hi.call(t,hi);try{di.call(t,di)}catch(t){return!0}return t instanceof WeakSet}catch(t){}return!1}(e))return Qi("WeakSet");if(function(t){if(!gi||!t||"object"!=typeof t)return!1;try{return gi.call(t),!0}catch(t){}return!1}(e))return Qi("WeakRef");if(function(t){return!("[object Number]"!==Hi(t)||Mi&&"object"==typeof t&&Mi in t)}(e))return Ki(f(Number(e)));if(function(t){if(!t||"object"!=typeof t||!xi)return!1;try{return xi.call(t),!0}catch(t){}return!1}(e))return Ki(f(xi.call(e)));if(function(t){return!("[object Boolean]"!==Hi(t)||Mi&&"object"==typeof t&&Mi in t)}(e))return Ki(bi.call(e));if(function(t){return!("[object String]"!==Hi(t)||Mi&&"object"==typeof t&&Mi in t)}(e))return Ki(f(String(e)));if("undefined"!=typeof window&&e===window)return"{ [object Window] }";if("undefined"!=typeof globalThis&&e===globalThis||"undefined"!=typeof global&&e===global)return"{ [object globalThis] }";if(!function(t){return!("[object Date]"!==Hi(t)||Mi&&"object"==typeof t&&Mi in t)}(e)&&!Wi(e)){var w=ra(e,f),_=Ri?Ri(e)===Object.prototype:e instanceof Object||e.constructor===Object,I=e instanceof Object?"":"null prototype",P=!_&&Mi&&Object(e)===e&&Mi in e?Si.call(Hi(e),8,-1):I?"Object":"",O=(_||"function"!=typeof e.constructor?"":e.constructor.name?e.constructor.name+" ":"")+(P||I?"["+Oi.call(Pi.call([],P||[],I||[]),": ")+"] ":"");return 0===w.length?O+"{}":l?O+"{"+ea(w,l)+"}":O+"{ "+Oi.call(w,", ")+" }"}return String(e)},sa=oa,pa=aa,la=Number.isNaN||function(t){return t!=t},fa=la,ya=function(t){return("number"==typeof t||"bigint"==typeof t)&&!fa(t)&&t!==1/0&&t!==-1/0},da=hr,ha=da("%Math.abs%"),ga=da("%Math.floor%"),ba=la,ma=ya,va=function(t){if("number"!=typeof t||ba(t)||!ma(t))return!1;var e=ha(t);return ga(e)===e},Aa={foo:{}},Sa=Object,Ea=SyntaxError,wa=Function,_a=TypeError,Ia=function(t){try{return wa('"use strict"; return ('+t+").constructor;")()}catch(t){}},Pa=Object.getOwnPropertyDescriptor;if(Pa)try{Pa({},"")}catch(t){Pa=null}var Oa=function(){throw new _a},Ta=Pa?function(){try{return Oa}catch(t){try{return Pa(arguments,"callee").get}catch(t){return Oa}}}():Oa,Fa=ve(),xa={__proto__:Aa}.foo===Aa.foo&&!({__proto__:null}instanceof Sa),Ca=Object.getPrototypeOf||(xa?function(t){return t.__proto__}:null),Na={},Ua="undefined"!=typeof Uint8Array&&Ca?Ca(Uint8Array):na,Ma={"%AggregateError%":"undefined"==typeof AggregateError?na:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?na:ArrayBuffer,"%ArrayIteratorPrototype%":Fa&&Ca?Ca([][Symbol.iterator]()):na,"%AsyncFromSyncIteratorPrototype%":na,"%AsyncFunction%":Na,"%AsyncGenerator%":Na,"%AsyncGeneratorFunction%":Na,"%AsyncIteratorPrototype%":Na,"%Atomics%":"undefined"==typeof Atomics?na:Atomics,"%BigInt%":"undefined"==typeof BigInt?na:BigInt,"%BigInt64Array%":"undefined"==typeof BigInt64Array?na:BigInt64Array,"%BigUint64Array%":"undefined"==typeof BigUint64Array?na:BigUint64Array,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?na:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"==typeof Float32Array?na:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?na:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?na:FinalizationRegistry,"%Function%":wa,"%GeneratorFunction%":Na,"%Int8Array%":"undefined"==typeof Int8Array?na:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?na:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?na:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Fa&&Ca?Ca(Ca([][Symbol.iterator]())):na,"%JSON%":"object"==typeof JSON?JSON:na,"%Map%":"undefined"==typeof Map?na:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&Fa&&Ca?Ca((new Map)[Symbol.iterator]()):na,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?na:Promise,"%Proxy%":"undefined"==typeof Proxy?na:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"==typeof Reflect?na:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?na:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&Fa&&Ca?Ca((new Set)[Symbol.iterator]()):na,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?na:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Fa&&Ca?Ca(""[Symbol.iterator]()):na,"%Symbol%":Fa?Symbol:na,"%SyntaxError%":Ea,"%ThrowTypeError%":Ta,"%TypedArray%":Ua,"%TypeError%":_a,"%Uint8Array%":"undefined"==typeof Uint8Array?na:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?na:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?na:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?na:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"==typeof WeakMap?na:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?na:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?na:WeakSet};if(Ca)try{null.error}catch(t){var ja=Ca(Ca(t));Ma["%Error.prototype%"]=ja}var Ra,La,Ba=function t(e){var r;if("%AsyncFunction%"===e)r=Ia("async function () {}");else if("%GeneratorFunction%"===e)r=Ia("function* () {}");else if("%AsyncGeneratorFunction%"===e)r=Ia("async function* () {}");else if("%AsyncGenerator%"===e){var n=t("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if("%AsyncIteratorPrototype%"===e){var o=t("%AsyncGenerator%");o&&Ca&&(r=Ca(o.prototype))}return Ma[e]=r,r},Da={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},ka=Sr,Ga=Er,$a=ka.call(Function.call,Array.prototype.concat),Va=ka.call(Function.apply,Array.prototype.splice),Wa=ka.call(Function.call,String.prototype.replace),Ja=ka.call(Function.call,String.prototype.slice),za=ka.call(Function.call,RegExp.prototype.exec),qa=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,Ha=/\\(\\)?/g,Ya=function(t,e){var r,n=t;if(Ga(Da,n)&&(n="%"+(r=Da[n])[0]+"%"),Ga(Ma,n)){var o=Ma[n];if(o===Na&&(o=Ba(n)),void 0===o&&!e)throw new _a("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:r,name:n,value:o}}throw new Ea("intrinsic "+t+" does not exist!")},Xa=yn,Za=bn,Ka=function(t,e){if("string"!=typeof t||0===t.length)throw new _a("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof e)throw new _a('"allowMissing" argument must be a boolean');if(null===za(/^%?[^%]*%?$/,t))throw new Ea("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var r=function(t){var e=Ja(t,0,1),r=Ja(t,-1);if("%"===e&&"%"!==r)throw new Ea("invalid intrinsic syntax, expected closing `%`");if("%"===r&&"%"!==e)throw new Ea("invalid intrinsic syntax, expected opening `%`");var n=[];return Wa(t,qa,(function(t,e,r,o){n[n.length]=r?Wa(o,Ha,"$1"):e||t})),n}(t),n=r.length>0?r[0]:"",o=Ya("%"+n+"%",e),i=o.name,a=o.value,u=!1,c=o.alias;c&&(n=c[0],Va(r,$a([0,1],c)));for(var s=1,p=!0;s<r.length;s+=1){var l=r[s],f=Ja(l,0,1),y=Ja(l,-1);if(('"'===f||"'"===f||"`"===f||'"'===y||"'"===y||"`"===y)&&f!==y)throw new Ea("property names with quotes must have matching quotes");if("constructor"!==l&&p||(u=!0),Ga(Ma,i="%"+(n+="."+l)+"%"))a=Ma[i];else if(null!=a){if(!(l in a)){if(!e)throw new _a("base intrinsic for "+t+" exists, but the property is not available.");return}if(Pa&&s+1>=r.length){var d=Pa(a,l);a=(p=!!d)&&"get"in d&&!("originalValue"in d.get)?d.get:a[l]}else p=Ga(a,l),a=a[l];p&&!u&&(Ma[i]=a)}}return a},Qa=Ka("%ArrayBuffer%",!0),tu=Za("ArrayBuffer.prototype.byteLength",!0),eu=Za("Object.prototype.toString"),ru=!!Qa&&!tu&&new Qa(0).slice,nu=!!ru&&Xa(ru),ou=tu||nu?function(t){if(!t||"object"!=typeof t)return!1;try{return tu?tu(t):nu(t,0),!0}catch(t){return!1}}:Qa?function(t){return"[object ArrayBuffer]"===eu(t)}:function(t){return!1},iu=bn("ArrayBuffer.prototype.byteLength",!0),au=ou,uu=function(t){return au(t)?iu?iu(t):t.byteLength:NaN},cu=Qt,su="undefined"==typeof globalThis?global:globalThis,pu=function(){for(var t=[],e=0;e<cu.length;e++)"function"==typeof su[cu[e]]&&(t[t.length]=cu[e]);return t},lu=bn("SharedArrayBuffer.prototype.byteLength",!0),fu=lu?function(t){if(!t||"object"!=typeof t)return!1;try{return lu(t),!0}catch(t){return!1}}:function(t){return!1},yu=ye,du=uu,hu=pu(),gu=ou,bu=fu,mu=bn("SharedArrayBuffer.prototype.byteLength",!0),vu=function(t){var e=bu(t);if(!gu(t)&&!e)throw new yu("Assertion failed: `arrayBuffer` must be an Object with an [[ArrayBufferData]] internal slot");if(0===(e?mu:du)(t))try{new global[hu[0]](t)}catch(t){return!!t&&"TypeError"===t.name}return!1};function Au(){if(La)return Ra;La=1;var t=ye,e=je,r=oa,n=aa;return Ra=function(o,i){if("Object"!==n(o))throw new t("Assertion failed: `O` must be an Object");if(!r(i))throw new t("Assertion failed: `P` must be a Property Key");return e(o,i)}}var Su,Eu,wu,_u,Iu,Pu,Ou,Tu,Fu,xu,Cu,Nu,Uu,Mu,ju,Ru,Lu,Bu,Du,ku,Gu=hr("%Array%"),$u=!Gu.isArray&&bn("Object.prototype.toString"),Vu=Gu.isArray||function(t){return"[object Array]"===$u(t)},Wu=Vu;function Ju(){return Eu||(Eu=1,Su=function(t){return"BIGUINT64"===t||"BIGINT64"===t}),Su}function zu(){return _u||(_u=1,wu=function(t){return"UINT8"===t||"UINT8C"===t||"UINT16"===t||"UINT32"===t||"BIGUINT64"===t}),wu}function qu(){if(Pu)return Iu;Pu=1;var t=hr("%Math.pow%");return Iu=function(e){var r=128&e[3]?-1:1,n=(127&e[3])<<1|e[2]>>7,o=(127&e[2])<<16|e[1]<<8|e[0];return 0===n&&0===o?1===r?0:-0:255===n&&0===o?1===r?1/0:-1/0:255===n&&0!==o?NaN:-127===(n-=127)?r*o*t(2,-149):r*(1+o*t(2,-23))*t(2,n)}}function Hu(){if(Tu)return Ou;Tu=1;var t=hr("%Math.pow%");return Ou=function(e){var r=128&e[7]?-1:1,n=(127&e[7])<<4|(240&e[6])>>4,o=281474976710656*(15&e[6])+1099511627776*e[5]+4294967296*e[4]+16777216*e[3]+65536*e[2]+256*e[1]+e[0];return 0===n&&0===o?0*r:2047===n&&0!==o?NaN:2047===n&&0===o?r*(1/0):-1023===(n-=1023)?r*o*5e-324:r*(1+o/4503599627370496)*t(2,n)}}function Yu(){if(xu)return Fu;xu=1;var t=hr,e=t("%Math.pow%"),r=t("%Number%"),n=t("%BigInt%",!0);return Fu=function(t,o,i,a){for(var u=a?n:r,c=u(0),s=0;s<t.length;s++)c+=u(t[s]*e(2,8*s));if(!i){var p=8*o;128&t[o-1]&&(c-=u(e(2,p)))}return c},Fu}function Xu(){return Nu?Cu:(Nu=1,Cu=function(t,e){for(var r=0;r<t.length;r+=1)if(!e(t[r],r,t))return!1;return!0})}function Zu(){return Mu?Uu:(Mu=1,Uu=function(t){return"number"==typeof t&&t>=0&&t<=255&&(0|t)===t})}var Ku,Qu,tc={__proto__:null,name:{__proto__:null,$Int8Array:"INT8",$Uint8Array:"UINT8",$Uint8ClampedArray:"UINT8C",$Int16Array:"INT16",$Uint16Array:"UINT16",$Int32Array:"INT32",$Uint32Array:"UINT32",$BigInt64Array:"BIGINT64",$BigUint64Array:"BIGUINT64",$Float32Array:"FLOAT32",$Float64Array:"FLOAT64"},size:{__proto__:null,$INT8:1,$UINT8:1,$UINT8C:1,$INT16:2,$UINT16:2,$INT32:4,$UINT32:4,$BIGINT64:8,$BIGUINT64:8,$FLOAT32:4,$FLOAT64:8}};function ec(){if(Qu)return Ku;Qu=1;var t=Un;return Ku=function(e){return!!t(e)}}var rc,nc,oc=ye,ic=bn("TypedArray.prototype.buffer",!0),ac=ec(),uc=ic||function(t){if(!ac(t))throw new oc("Not a Typed Array");return t.buffer};function cc(){if(nc)return rc;nc=1;var t=hr,e=t("%Uint8Array%",!0),r=t("%Uint32Array%",!0),n=uc,o=r&&new r([305419896]),i=o&&new e(n(o));return rc=i?120===i[0]?"little":18===i[0]?"big":52===i[0]?"mixed":"unknown":"indeterminate"}var sc,pc,lc,fc,yc,dc,hc,gc,bc=fe,mc=ye,vc=hr("%Uint8Array%",!0),Ac=bn("Array.prototype.slice"),Sc=va,Ec=vu,wc=function(){if(Ru)return ju;Ru=1;var t=bn,e=pe,r=fe,n=ye,o=hr("%BigInt%",!0),i=Au(),a=Wu,u=Ju(),c=zu(),s=qu(),p=Hu(),l=Yu(),f=Xu(),y=Zu(),d=t("Array.prototype.reverse"),h=t("Array.prototype.slice"),g=$n,b={__proto__:null,INT8:1,UINT8:1,UINT8C:1,INT16:2,UINT16:2,INT32:4,UINT32:4,BIGINT64:8,BIGUINT64:8,FLOAT32:4,FLOAT64:8};return ju=function(t,m,v){if(!i(b,t))throw new n("Assertion failed: `type` must be a TypedArray element type: "+g(b));if(!a(m)||!f(m,y))throw new n("Assertion failed: `rawBytes` must be an Array of bytes");if("boolean"!=typeof v)throw new n("Assertion failed: `isLittleEndian` must be a Boolean");var A=b[t];if(m.length!==A)throw new e("Assertion failed: `rawBytes` must have a length of "+A+" for type "+t);var S=u(t);if(S&&!o)throw new r("this environment does not support BigInts");return m=h(m,0,A),v||d(m),"FLOAT32"===t?s(m):"FLOAT64"===t?p(m):l(m,A,c(t),S)},ju}(),_c=ou,Ic=fu,Pc=function(){if(ku)return Du;ku=1;var t=hr("%Array.prototype.concat%"),e=yn,r=bn("Array.prototype.slice"),n=he()()&&Symbol.isConcatSpreadable,o=[],i=n?e.apply(t,o):null,a=n?function(){if(Bu)return Lu;Bu=1;var t={}.toString;return Lu=Array.isArray||function(e){return"[object Array]"==t.call(e)}}():null;return Du=n?function(t){for(var e=arguments,u=0;u<arguments.length;u+=1){var c=e[u];if(c&&"object"==typeof c&&"boolean"==typeof c[n]){o[n]||(o[n]=!0);var s=a(c)?r(c):[c];s[n]=!0,e[u]=s}}return i(arguments)}:e(t,o),Du}(),Oc=tc,Tc=cc(),Fc=hr("%Math.max%"),xc=hr("%Math.min%"),Cc=la,Nc=function(t,e){return t===e?0!==t||1/t==1/e:Cc(t)&&Cc(e)},Uc=ye,Mc=oa,jc=Nc,Rc=aa,Lc=function(){try{return delete[].length,!0}catch(t){return!1}}();function Bc(){if(pc)return sc;pc=1;var t=hr("%BigInt%",!0),e=ye,r=fe;return sc=function(n){if("string"!=typeof n)throw new e("`argument` must be a string");if(!t)throw new r("BigInts are not supported in this environment");try{return t(n)}catch(t){return}}}function Dc(){if(dc)return yc;dc=1;var t=he();return yc=function(){return t()&&!!Symbol.toStringTag}}function kc(){if(gc)return hc;gc=1;var t=Date.prototype.getDay,e=Object.prototype.toString,r=Dc()();return hc=function(n){return"object"==typeof n&&null!==n&&(r?function(e){try{return t.call(e),!0}catch(t){return!1}}(n):"[object Date]"===e.call(n))}}var Gc,$c,Vc,Wc,Jc,zc,qc,Hc,Yc,Xc,Zc,Kc,Qc,ts,es,rs,ns,os,is,as,us,cs,ss,ps,ls,fs,ys,ds={exports:{}};function hs(){if(Gc)return ds.exports;Gc=1;var t=Object.prototype.toString;if(ve()){var e=Symbol.prototype.toString,r=/^Symbol\(.*\)$/;ds.exports=function(n){if("symbol"==typeof n)return!0;if("[object Symbol]"!==t.call(n))return!1;try{return function(t){return"symbol"==typeof t.valueOf()&&r.test(e.call(t))}(n)}catch(t){return!1}}}else ds.exports=function(t){return!1};return ds.exports}function gs(){if(Vc)return $c;Vc=1;var t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator,e=fc?lc:(fc=1,lc=function(t){return null===t||"function"!=typeof t&&"object"!=typeof t}),r=Ht,n=kc(),o=hs();return $c=function(i){if(e(i))return i;var a,u="default";if(arguments.length>1&&(arguments[1]===String?u="string":arguments[1]===Number&&(u="number")),t&&(Symbol.toPrimitive?a=function(t,e){var n=t[e];if(null!=n){if(!r(n))throw new TypeError(n+" returned for property "+e+" of object "+t+" is not a function");return n}}(i,Symbol.toPrimitive):o(i)&&(a=Symbol.prototype.valueOf)),void 0!==a){var c=a.call(i,u);if(e(c))return c;throw new TypeError("unable to convert exotic object to primitive")}return"default"===u&&(n(i)||o(i))&&(u="string"),function(t,n){if(null==t)throw new TypeError("Cannot call method on "+t);if("string"!=typeof n||"number"!==n&&"string"!==n)throw new TypeError('hint must be "string" or "number"');var o,i,a,u="string"===n?["toString","valueOf"]:["valueOf","toString"];for(a=0;a<u.length;++a)if(o=t[u[a]],r(o)&&(i=o.call(t),e(i)))return i;throw new TypeError("No default value")}(i,"default"===u?"number":u)},$c}function bs(){if(Jc)return Wc;Jc=1;var t=gs();return Wc=function(e){return arguments.length>1?t(e,arguments[1]):t(e)},Wc}function ms(){if(qc)return zc;qc=1;var t=hr,e=t("%BigInt%",!0),r=t("%Number%"),n=ye,o=fe,i=Bc(),a=bs();return zc=function(t){if(!e)throw new o("BigInts are not supported in this environment");var u=a(t,r);if(null==u)throw new n("Cannot convert null or undefined to a BigInt");if("boolean"==typeof u)return e(u?1:0);if("number"==typeof u)throw new n("Cannot convert a Number value to a BigInt");if("string"==typeof u){var c=i(u);if(void 0===c)throw new n("Failed to parse String to BigInt");return c}if("symbol"==typeof u)throw new n("Cannot convert a Symbol value to a BigInt");if("bigint"!=typeof u)throw new o("Assertion failed: unknown primitive type");return u}}function vs(){if(Yc)return Hc;Yc=1;var t=hr("%BigInt%",!0),e=pe,r=ye,n=t&&t(0);return Hc=function(t,o){if("bigint"!=typeof t||"bigint"!=typeof o)throw new r("Assertion failed: `n` and `d` arguments must be BigInts");if(o===n)throw new e("Division by zero");return t===n?n:t%o}}function As(){return Zc||(Zc=1,Xc=function(t,e,r){var n=t(e,r);return n>=0?n:n+r}),Xc}function Ss(){if(Qc)return Kc;Qc=1;var t=hr,e=t("%BigInt%",!0),r=t("%Math.pow%"),n=ms(),o=vs(),i=As(),a=e&&BigInt(r(2,32))*BigInt(r(2,31)),u=e&&BigInt(r(2,32))*BigInt(r(2,32));return Kc=function(t){var e=n(t),r=i(o,e,u);return r>=a?r-u:r}}function Es(){if(es)return ts;es=1;var t=hr,e=t("%BigInt%",!0),r=t("%Math.pow%"),n=ms(),o=vs(),i=As(),a=e&&BigInt(r(2,32))*BigInt(r(2,32));return ts=function(t){var e=n(t);return i(o,e,a)}}function ws(){if(ns)return rs;ns=1;var t=Math.floor;return rs=function(e,r){var n=e%r;return t(n>=0?n:n+r)},rs}function _s(){if(is)return os;is=1;var t=ws();return os=function(e,r){return t(e,r)}}function Is(){if(ss)return cs;ss=1;var t,e,r,n,o=bn,i=Dc()();if(i){t=o("Object.prototype.hasOwnProperty"),e=o("RegExp.prototype.exec"),r={};var a=function(){throw r};n={toString:a,valueOf:a},"symbol"==typeof Symbol.toPrimitive&&(n[Symbol.toPrimitive]=a)}var u=o("Object.prototype.toString"),c=Object.getOwnPropertyDescriptor;return cs=i?function(o){if(!o||"object"!=typeof o)return!1;var i=c(o,"lastIndex");if(!(i&&t(i,"value")))return!1;try{e(o,n)}catch(t){return t===r}}:function(t){return!(!t||"object"!=typeof t&&"function"!=typeof t)&&"[object RegExp]"===u(t)},cs}function Ps(){if(ys)return fs;ys=1;var t=ye;return fs=function(e){if(null==e)throw new t(arguments.length>0&&arguments[1]||"Cannot call method on "+e);return e},fs}var Os,Ts,Fs,xs,Cs,Ns,Us,Ms,js,Rs,Ls=hr("%String%"),Bs=ye,Ds=function(t){if("symbol"==typeof t)throw new Bs("Cannot convert a Symbol value to a string");return Ls(t)};function ks(){if(Ts)return Os;Ts=1;var t=Ps(),e=Ds,r=bn("String.prototype.replace"),n=/^\s$/.test("᠎"),o=n?/^[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]+/:/^[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]+/,i=n?/[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]+$/:/[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]+$/;return Os=function(){var n=e(t(this));return r(r(n,o,""),i,"")}}function Gs(){if(xs)return Fs;xs=1;var t=ks(),e="᠎";return Fs=function(){return String.prototype.trim&&"​"==="​".trim()&&e.trim()===e&&"_᠎"==="_᠎".trim()&&"᠎_"==="᠎_".trim()?String.prototype.trim:t}}function $s(){if(Ms)return Us;Ms=1;var t=yn,e=oi,r=Ps(),n=ks(),o=Gs(),i=function(){if(Ns)return Cs;Ns=1;var t=oi,e=Gs();return Cs=function(){var r=e();return t(String.prototype,{trim:r},{trim:function(){return String.prototype.trim!==r}}),r},Cs}(),a=t(o()),u=function(t){return r(t),a(t)};return e(u,{getPolyfill:o,implementation:n,shim:i}),Us=u}var Vs,Ws,Js,zs,qs,Hs,Ys,Xs,Zs,Ks,Qs,tp,ep,rp,np,op,ip,ap,up,cp,sp,pp,lp,fp,yp,dp,hp,gp,bp,mp,vp,Ap,Sp=ye,Ep=hr("%Number%"),wp=us?as:(us=1,as=function(t){return null===t||"function"!=typeof t&&"object"!=typeof t}),_p=bs(),Ip=function(){if(Rs)return js;Rs=1;var t=hr,e=t("%Number%"),r=t("%RegExp%"),n=ye,o=t("%parseInt%"),i=bn,a=function(){if(ls)return ps;ls=1;var t=bn,e=Is(),r=t("RegExp.prototype.exec"),n=ye;return ps=function(t){if(!e(t))throw new n("`regex` must be a RegExp");return function(e){return null!==r(t,e)}}}(),u=i("String.prototype.slice"),c=a(/^0b[01]+$/i),s=a(/^0o[0-7]+$/i),p=a(/^[-+]0x[0-9a-f]+$/i),l=a(new r("["+["","​","￾"].join("")+"]","g")),f=$s();return js=function t(r){if("string"!=typeof r)throw new n("Assertion failed: `argument` is not a String");if(c(r))return e(o(u(r,2),2));if(s(r))return e(o(u(r,2),8));if(l(r)||p(r))return NaN;var i=f(r);return i!==r?t(i):e(r)},js}(),Pp=function(t){var e=wp(t)?t:_p(t,Ep);if("symbol"==typeof e)throw new Sp("Cannot convert a Symbol value to a number");if("bigint"==typeof e)throw new Sp("Conversion from 'BigInt' to 'number' is not allowed.");return"string"==typeof e?Ip(e):Ep(e)},Op=Math.floor,Tp=function(t){return"bigint"==typeof t?t:Op(t)},Fp=Tp,xp=ye,Cp=function(t){if("number"!=typeof t&&"bigint"!=typeof t)throw new xp("argument must be a Number or a BigInt");var e=t<0?-Fp(-t):Fp(t);return 0===e?0:e};function Np(){if(Ws)return Vs;Ws=1;var t=_s(),e=Pp,r=Cp,n=ya;return Vs=function(o){var i=e(o);if(!n(i)||0===i)return 0;var a=r(i),u=t(a,65536);return u>=32768?u-65536:u}}function Up(){if(zs)return Js;zs=1;var t=_s(),e=Pp,r=Cp,n=ya,o=4294967296;return Js=function(i){var a=e(i);if(!n(a)||0===a)return 0;var u=r(a),c=t(u,o),s=c>=2147483648?c-o:c;return 0===s?0:s}}function Mp(){if(Hs)return qs;Hs=1;var t=_s(),e=Pp,r=Cp,n=ya;return qs=function(o){var i=e(o);if(!n(i)||0===i)return 0;var a=r(i),u=t(a,256);return u>=128?u-256:u}}function jp(){if(Xs)return Ys;Xs=1;var t=_s(),e=Pp,r=Cp,n=ya;return Ys=function(o){var i=e(o);if(!n(i)||0===i)return 0;var a=r(i),u=t(a,65536);return 0===u?0:u}}function Rp(){if(Ks)return Zs;Ks=1;var t=_s(),e=Pp,r=Cp,n=ya;return Zs=function(o){var i=e(o);if(!n(i)||0===i)return 0;var a=r(i),u=t(a,4294967296);return 0===u?0:u}}function Lp(){if(tp)return Qs;tp=1;var t=ya,e=_s(),r=Pp,n=Cp;return Qs=function(o){var i=r(o);if(!t(i)||0===i)return 0;var a=n(i);return e(a,256)}}function Bp(){if(rp)return ep;rp=1;var t=hr,e=ye,r=t("%Math.max%"),n=t("%Math.min%");return ep=function(t,o,i){if("number"!=typeof t||"number"!=typeof o||"number"!=typeof i||!(o<=i))throw new e("Assertion failed: all three arguments must be MVs, and `lower` must be `<= upper`");return n(r(o,t),i)}}function Dp(){if(op)return np;op=1;var t=Bp(),e=Pp,r=Tp,n=la;return np=function(o){var i=e(o);if(n(i))return 0;var a=t(i,0,255),u=r(a);return a<u+.5?u:a>u+.5?u+1:u%2==0?u:u+1}}function kp(){return ap?ip:(ap=1,ip=function(t){return 0===t&&1/t==-1/0})}function Gp(){if(cp)return up;cp=1;var t=hr,e=t("%Math.abs%"),r=t("%Math.floor%"),n=t("%Math.pow%"),o=ya,i=la,a=kp();return up=function(t,u){if(i(t))return u?[0,0,192,127]:[127,192,0,0];var c;if(0===t)return c=a(t)?128:0,u?[0,0,0,c]:[c,0,0,0];if(e(t)>34028234663852886e22||!o(t))return c=t<0?255:127,u?[0,0,128,c]:[c,128,0,0];var s=t<0?1:0;t=e(t);for(var p=0;t>=2;)p+=1,t/=2;for(;t<1;)p-=1,t*=2;var l=t-1;l*=n(2,23)+.5,p+=127;var f=s<<31|(p<<=23)|(l=r(l)),y=255&f,d=255&(f>>=8),h=255&(f>>=8),g=255&(f>>=8);return u?[y,d,h,g]:[g,h,d,y]}}function $p(){if(dp)return yp;dp=1;var t=hr,e=t("%parseInt%"),r=t("%Math.abs%"),n=t("%Math.floor%"),o=bn,i=o("String.prototype.indexOf"),a=o("String.prototype.slice"),u=function(){if(pp)return sp;pp=1;var t=1075;return sp=function(e){var r="";if(0===e)return r;for(var n,o=t,i=0;i<t;i+=1)if((n=2*e)>=1?(e=n-1,r+="1",o===t&&(o=i)):(e=n,r+="0"),1===n||i-o>54)return r;return r}}(),c=function(){if(fp)return lp;fp=1;var t=hr("%Math.floor%");return lp=function(e){for(var r,n="";e>0;)n=(r=e/2)===(e=t(r))?"0"+n:"1"+n;return n}}(),s=kp(),p=1023,l="11111111111",f="00000000000",y=f+f+f+f+"0000000";return yp=function(t,o){var d,h,g=t<0||s(t)?"1":"0";if(isNaN(t))d=l,h="1"+y;else if(isFinite(t))if(0===t)d=f,h="0"+y;else{t=r(t);var b,m=n(t),v=c(m),A=u(t-m);if(v)d=v.length-1;else{var S=i(A,"1");S>-1&&(b=S+1),d=-b}h=v+A,d<0?(d<=-1023&&(b=1022),h=a(h,b)):h=a(h,1),d=a(f+c(d+p),-11),h=a(h+y+"0",0,52)}else d=l,h="0"+y;for(var E=g+d+h,w=[],_=0;_<8;_++){w[o?8-_-1:_]=e(a(E,8*_,8*(_+1)),2)}return w}}function Vp(){if(gp)return hp;gp=1;var t=hr,e=t("%Number%"),r=t("%BigInt%",!0);return hp=function(t,n,o){var i="bigint"==typeof t?r:e;t<0&&(t>>>=0);for(var a=[],u=0;u<n;u++)a[o?u:n-1-u]=e(t&i(255)),t>>=i(8);return a}}var Wp,Jp,zp,qp,Hp,Yp,Xp,Zp,Kp,Qp,tl,el,rl,nl,ol,il,al,ul,cl,sl,pl,ll,fl=fe,yl=ye,dl=hr("%Uint8Array%",!0),hl=va,gl=Ju(),bl=vu,ml=function(){if(mp)return bp;mp=1;var t=ye,e=Au(),r=Ss(),n=Es(),o=Np(),i=Up(),a=Mp(),u=jp(),c=Rp(),s=Lp(),p=Dp(),l=Gp(),f=$p(),y=Vp(),d=$n,h={__proto__:null,INT8:1,UINT8:1,UINT8C:1,INT16:2,UINT16:2,INT32:4,UINT32:4,BIGINT64:8,BIGUINT64:8,FLOAT32:4,FLOAT64:8},g={__proto__:null,INT8:a,UINT8:s,UINT8C:p,INT16:o,UINT16:u,INT32:i,UINT32:c,BIGINT64:r,BIGUINT64:n};return bp=function(r,n,o){if("string"!=typeof r||!e(h,r))throw new t("Assertion failed: `type` must be a TypedArray element type: "+d(h));if("number"!=typeof n&&"bigint"!=typeof n)throw new t("Assertion failed: `value` must be a Number or a BigInt");if("boolean"!=typeof o)throw new t("Assertion failed: `isLittleEndian` must be a Boolean");if("FLOAT32"===r)return l(n,o);if("FLOAT64"===r)return f(n,o);var i=h[r],a=(0,g[r])(n);return y(a,i,o)},bp}(),vl=ou,Al=fu,Sl=je,El=tc,wl=cc(),_l=Ap?vp:(Ap=1,vp=function(t,e){for(var r=0;r<t.length;r+=1)e(t[r],r,t)}),Il=Pp,Pl=Cp,Ol=la,Tl=ya,Fl=fe,xl=ye,Cl=va,Nl=Un,Ul=tc,Ml=function(t){var e=Nl(t);if(!1===e)throw new xl("Assertion failed: `O` must be a TypedArray");var r=Ul.size["$"+Ul.name["$"+e]];if(!Cl(r)||r<0)throw new Fl("Assertion failed: Unknown TypedArray type `"+e+"`");return r},jl=fe,Rl=ye,Ll=Un,Bl=tc,Dl={exports:{}};function kl(){if(Jp)return Wp;Jp=1;var t=ye,e=je,r={__proto__:null,"[[Configurable]]":!0,"[[Enumerable]]":!0,"[[Get]]":!0,"[[Set]]":!0,"[[Value]]":!0,"[[Writable]]":!0};return Wp=function(n){if(!n||"object"!=typeof n)return!1;for(var o in n)if(e(n,o)&&!r[o])return!1;var i=e(n,"[[Value]]")||e(n,"[[Writable]]"),a=e(n,"[[Get]]")||e(n,"[[Set]]");if(i&&a)throw new t("Property Descriptors may not be both accessor and data descriptors");return!0}}function Gl(){if(Yp)return Hp;Yp=1;var t=function(){if(qp)return zp;qp=1;var t=gr(),e=function(){return!!t};return e.hasArrayLengthDefineBug=function(){if(!t)return null;try{return 1!==t([],"length",{value:1}).length}catch(t){return!0}},zp=e}(),e=gr(),r=t.hasArrayLengthDefineBug(),n=r&&Vu,o=bn("Object.prototype.propertyIsEnumerable");return Hp=function(t,i,a,u,c,s){if(!e){if(!t(s))return!1;if(!s["[[Configurable]]"]||!s["[[Writable]]"])return!1;if(c in u&&o(u,c)!==!!s["[[Enumerable]]"])return!1;var p=s["[[Value]]"];return u[c]=p,i(u[c],p)}return r&&"length"===c&&"[[Value]]"in s&&n(u)&&u.length!==s["[[Value]]"]?(u.length=s["[[Value]]"],u.length===s["[[Value]]"]):(e(u,c,a(s)),!0)},Hp}function $l(){return Zp?Xp:(Zp=1,Xp=function(t){if(void 0===t)return t;var e={};return"[[Value]]"in t&&(e.value=t["[[Value]]"]),"[[Writable]]"in t&&(e.writable=!!t["[[Writable]]"]),"[[Get]]"in t&&(e.get=t["[[Get]]"]),"[[Set]]"in t&&(e.set=t["[[Set]]"]),"[[Enumerable]]"in t&&(e.enumerable=!!t["[[Enumerable]]"]),"[[Configurable]]"in t&&(e.configurable=!!t["[[Configurable]]"]),e})}function Vl(){if(Qp)return Kp;Qp=1;var t=ye,e=kl(),r=$l();return Kp=function(n){if(void 0!==n&&!e(n))throw new t("Assertion failed: `Desc` must be a Property Descriptor");return r(n)}}function Wl(){if(el)return tl;el=1;var t=ye,e=je,r=kl();return tl=function(n){if(void 0===n)return!1;if(!r(n))throw new t("Assertion failed: `Desc` must be a Property Descriptor");return!(!e(n,"[[Value]]")&&!e(n,"[[Writable]]"))}}function Jl(){return nl?rl:(nl=1,rl=function(t){return!!t})}function zl(){return ul||(ul=1,al=function(){if(il)return ol;il=1;var t,e,r=Function.prototype.toString,n="object"==typeof Reflect&&null!==Reflect&&Reflect.apply;if("function"==typeof n&&"function"==typeof Object.defineProperty)try{t=Object.defineProperty({},"length",{get:function(){throw e}}),e={},n((function(){throw 42}),null,t)}catch(t){t!==e&&(n=null)}else n=null;var o=/^\s*class\b/,i=function(t){try{var e=r.call(t);return o.test(e)}catch(t){return!1}},a=function(t){try{return!i(t)&&(r.call(t),!0)}catch(t){return!1}},u=Object.prototype.toString,c="function"==typeof Symbol&&!!Symbol.toStringTag,s=!(0 in[,]),p=function(){return!1};if("object"==typeof document){var l=document.all;u.call(l)===u.call(document.all)&&(p=function(t){if((s||!t)&&(void 0===t||"object"==typeof t))try{var e=u.call(t);return("[object HTMLAllCollection]"===e||"[object HTML document.all class]"===e||"[object HTMLCollection]"===e||"[object Object]"===e)&&null==t("")}catch(t){}return!1})}return ol=n?function(r){if(p(r))return!0;if(!r)return!1;if("function"!=typeof r&&"object"!=typeof r)return!1;try{n(r,null,t)}catch(t){if(t!==e)return!1}return!i(r)&&a(r)}:function(t){if(p(t))return!0;if(!t)return!1;if("function"!=typeof t&&"object"!=typeof t)return!1;if(c)return a(t);if(i(t))return!1;var e=u.call(t);return!("[object Function]"!==e&&"[object GeneratorFunction]"!==e&&!/^\[object HTML/.test(e))&&a(t)},ol}()),al}function ql(){if(sl)return cl;sl=1;var t=je,e=ye,r=aa,n=Jl(),o=zl();return cl=function(i){if("Object"!==r(i))throw new e("ToPropertyDescriptor requires an object");var a={};if(t(i,"enumerable")&&(a["[[Enumerable]]"]=n(i.enumerable)),t(i,"configurable")&&(a["[[Configurable]]"]=n(i.configurable)),t(i,"value")&&(a["[[Value]]"]=i.value),t(i,"writable")&&(a["[[Writable]]"]=n(i.writable)),t(i,"get")){var u=i.get;if(void 0!==u&&!o(u))throw new e("getter must be a function");a["[[Get]]"]=u}if(t(i,"set")){var c=i.set;if(void 0!==c&&!o(c))throw new e("setter must be a function");a["[[Set]]"]=c}if((t(a,"[[Get]]")||t(a,"[[Set]]"))&&(t(a,"[[Value]]")||t(a,"[[Writable]]")))throw new e("Invalid property descriptor. Cannot both specify accessors and a value or writable attribute");return a}}var Hl=hr("%Reflect.construct%",!0),Yl=function(){if(ll)return pl;ll=1;var t=ye,e=kl(),r=Gl(),n=Vl(),o=Wl(),i=oa,a=Nc,u=ql(),c=aa;return pl=function(s,p,l){if("Object"!==c(s))throw new t("Assertion failed: Type(O) is not Object");if(!i(p))throw new t("Assertion failed: IsPropertyKey(P) is not true");var f=e(l)?l:u(l);if(!e(f))throw new t("Assertion failed: Desc is not a valid Property Descriptor");return r(o,a,n,s,p,f)}}();try{Yl({},"",{"[[Get]]":function(){}})}catch(t){Yl=null}if(Yl&&Hl){var Xl={},Zl={};Yl(Zl,"length",{"[[Get]]":function(){throw Xl},"[[Enumerable]]":!0}),Dl.exports=function(t){try{Hl(t,Zl)}catch(t){return t===Xl}}}else Dl.exports=function(t){return"function"==typeof t&&!!t.prototype};var Kl=Dl.exports,Ql=hr("%Symbol.species%",!0),tf=ye,ef=Kl,rf=aa,nf=je,of=ec(),af=va,uf=function(t){return!!t&&"object"==typeof t&&nf(t,"[[Object]]")&&nf(t,"[[CachedBufferByteLength]]")&&(af(t["[[CachedBufferByteLength]]"])&&t["[[CachedBufferByteLength]]"]>=0||"DETACHED"===t["[[CachedBufferByteLength]]"])&&of(t["[[Object]]"])},cf=Qt,sf="undefined"==typeof globalThis?global:globalThis,pf={__proto__:null,foo:{}},lf=Object,ff=Kt,yf=yn,df=function(){for(var t=[],e=0;e<cf.length;e++)"function"==typeof sf[cf[e]]&&(t[t.length]=cf[e]);return t}(),hf={},gf={__proto__:pf}.foo===pf.foo&&!(pf instanceof lf),bf=Xr,mf=Object.defineProperty;if(bf){var vf=function(t){return t.byteOffset};ff(df,(function(t){if("function"==typeof global[t]||"object"==typeof global[t]){var e=global[t].prototype,r=bf(e,"byteOffset");if(!r&&gf){var n=e.__proto__;r=bf(n,"byteOffset")}if(r&&r.get)hf[t]=yf(r.get);else if(mf){var o=new global[t](2);(r=bf(o,"byteOffset"))&&r.configurable&&mf(o,"length",{value:3}),2===o.length&&(hf[t]=vf)}}}))}var Af=ec(),Sf=function(t){return!!Af(t)&&function(t){var e;return ff(hf,(function(r){if("number"!=typeof e)try{var n=r(t);"number"==typeof n&&(e=n)}catch(t){}})),e}(t)},Ef={__proto__:null,foo:{}},wf=yn,_f=Kt,If=Xr,Pf={__proto__:Ef}.foo===Ef.foo&&!(Ef instanceof Object),Of=ec(),Tf=Qt,Ff={__proto__:null},xf=Object.defineProperty;if(If){var Cf=function(t){return t.length};_f(Tf,(function(t){var e=global[t];if("function"==typeof e||"object"==typeof e){var r=e.prototype,n=If(r,"length");if(!n&&Pf){var o=r.__proto__;n=If(o,"length")}if(n&&n.get)Ff["$"+t]=wf(n.get);else if(xf){var i=new global[t](2);(n=If(i,"length"))&&n.configurable&&xf(i,"length",{value:3}),2===i.length&&(Ff["$"+t]=Cf)}}}))}var Nf,Uf,Mf=function(t){return!!Of(t)&&function(t){var e;return _f(Ff,(function(r){if("number"!=typeof e)try{var n=r(t);"number"==typeof n&&(e=n)}catch(t){}})),e}(t)},jf=ye,Rf=vu,Lf=Ml,Bf=uf,Df=uc,kf=Sf,Gf=Mf,$f=function(t){if(!Bf(t))throw new jf("Assertion failed: `taRecord` must be a TypedArray With Buffer Witness Record");var e=t["[[Object]]"],r=t["[[CachedBufferByteLength]]"];if(Rf(Df(e))&&"DETACHED"!==r)throw new jf("Assertion failed: typed array is detached only if the byte length is ~DETACHED~");if("DETACHED"===r)return!0;var n,o=kf(e),i=Gf(e);"AUTO"===i?n=r:n=o+i*Lf(e);return o>r||n>r},Vf=ye,Wf=bn,Jf=Wf("%ArrayBuffer.prototype.resizable%",!0),zf=Wf("%SharedArrayBuffer.prototype.growable%",!0),qf=ou,Hf=fu,Yf=ye,Xf=Tp,Zf=function(t){var e=qf(t),r=Hf(t);if(!e&&!r)throw new Vf("Assertion failed: `arrayBuffer` must be an ArrayBuffer or SharedArrayBuffer");return e&&Jf?!Jf(t):!r||!zf||!zf(t)},Kf=$f,Qf=Ml,ty=uf,ey=uc,ry=Sf,ny=Mf,oy=ye,iy=vu,ay=ou,uy=fu,cy=uu,sy=ye,py=function(t,e){var r=uy(t);if(!ay(t)&&!r)throw new oy("Assertion failed: `arrayBuffer` must be an ArrayBuffer or a SharedArrayBuffer");if("SEQ-CST"!==e&&"UNORDERED"!==e)throw new oy("Assertion failed: `order` must be ~SEQ-CST~ or ~UNORDERED~");if(iy(t))throw new oy("Assertion failed: `arrayBuffer` must not be detached");return cy(t)},ly=vu,fy=ec(),yy=uc,dy=ye,hy=$f,gy=function(t,e){if(!fy(t))throw new sy("Assertion failed: `obj` must be a Typed Array");if("SEQ-CST"!==e&&"UNORDERED"!==e)throw new sy("Assertion failed: `order` must be ~SEQ-CST~ or ~UNORDERED~");var r=yy(t);return{"[[Object]]":t,"[[CachedBufferByteLength]]":ly(r)?"DETACHED":py(r,e)}},by=aa,my=ec(),vy=function(t,e){if("SEQ-CST"!==e&&"UNORDERED"!==e)throw new dy("Assertion failed: `order` must be ~SEQ-CST~ or ~UNORDERED~");if("Object"!==by(t))throw new dy("Assertion failed: `O` must be an Object");if(!my(t))throw new dy("Assertion failed: `O` must be a Typed Array");var r=gy(t,e);if(hy(r))throw new dy("`O` must be in-bounds and backed by a non-detached buffer");return r},Ay=fe,Sy=ye,Ey=Wu,wy=Kl,_y=$f,Iy=function(t){if(!ty(t))throw new Yf("Assertion failed: `taRecord` must be a TypedArray With Buffer Witness Record");if(Kf(t))throw new Yf("Assertion failed: `taRecord` is out of bounds");var e=t["[[Object]]"],r=ny(e);if("AUTO"!==r)return r;if(Zf(ey(e)))throw new Yf("Assertion failed: array buffer is not fixed length");var n=ry(e),o=Qf(e),i=t["[[CachedBufferByteLength]]"];if("DETACHED"===i)throw new Yf("Assertion failed: typed array is detached");return Xf((i-n)/o)},Py=vy,Oy=pu(),Ty=hr,Fy={__proto__:null,$Int8Array:Ty("%Int8Array%",!0),$Uint8Array:Ty("%Uint8Array%",!0),$Uint8ClampedArray:Ty("%Uint8ClampedArray%",!0),$Int16Array:Ty("%Int16Array%",!0),$Uint16Array:Ty("%Uint16Array%",!0),$Int32Array:Ty("%Int32Array%",!0),$Uint32Array:Ty("%Uint32Array%",!0),$BigInt64Array:Ty("%BigInt64Array%",!0),$BigUint64Array:Ty("%BigUint64Array%",!0),$Float32Array:Ty("%Float32Array%",!0),$Float64Array:Ty("%Float64Array%",!0)},xy=fe,Cy=ye,Ny=Un,Uy=pu(),My=Wu,jy=function(t,e){if("Object"!==rf(t))throw new tf("Assertion failed: Type(O) is not Object");var r=t.constructor;if(void 0===r)return e;if("Object"!==rf(r))throw new tf("O.constructor is not an Object");var n=Ql?r[Ql]:void 0;if(null==n)return e;if(ef(n))return n;throw new tf("no constructor found")},Ry=function(t,e){if(!wy(t))throw new Sy("Assertion failed: `constructor` must be a constructor");if(!Ey(e))throw new Sy("Assertion failed: `argumentList` must be a List");if(0===Oy.length)throw new Ay("Assertion failed: Typed Arrays are not supported in this environment");var r;r=0===e.length?new t:1===e.length?new t(e[0]):2===e.length?new t(e[0],e[1]):new t(e[0],e[1],e[2]);var n=Py(r,"SEQ-CST");if(1===e.length&&"number"==typeof e[0]){if(_y(n))throw new Sy("new Typed Array is out of bounds");if(Iy(n)<e[0])throw new Sy("`argumentList[0]` must be <= `newTypedArray.length`")}return r},Ly=function(t){return Fy["$"+t]},By=ye,Dy=function(t,e){if("Object"!==pa(t))throw new ua("Assertion failed: Type(O) is not Object");if(!sa(e))throw new ua("Assertion failed: IsPropertyKey(P) is not true, got "+ca(e));return t[e]},ky=function(t,e,r,n,o){var i=Ic(t);if(!_c(t)&&!i)throw new mc("Assertion failed: `arrayBuffer` must be an ArrayBuffer or a SharedArrayBuffer");if(!Sc(e))throw new mc("Assertion failed: `byteIndex` must be an integer");if("string"!=typeof r||"number"!=typeof Oc.size["$"+r])throw new mc("Assertion failed: `type` must be a Typed Array element type");if("boolean"!=typeof n)throw new mc("Assertion failed: `isTypedArray` must be a boolean");if("SEQ-CST"!==o&&"UNORDERED"!==o)throw new mc("Assertion failed: `order` must be either `SEQ-CST` or `UNORDERED`");if(arguments.length>5&&"boolean"!=typeof arguments[5])throw new mc("Assertion failed: `isLittleEndian` must be a boolean, if present");if(Ec(t))throw new mc("Assertion failed: `arrayBuffer` is detached");if(e<0)throw new mc("Assertion failed: `byteIndex` must be non-negative");var a,u=Oc.size["$"+r];if(!u)throw new mc('Assertion failed: `type` must be one of "INT8", "UINT8", "UINT8C", "INT16", "UINT16", "INT32", "UINT32", "BIGINT64", "BIGUINT64", "FLOAT32", or "FLOAT64"');if(i)throw new bc("SharedArrayBuffer is not supported by this implementation");a=Ac(new vc(t,e),0,u);var c=arguments.length>5?arguments[5]:"little"===Tc,s=c?Ac(Pc([0,0,0,0,0,0,0,0],a),-u):Ac(Pc(a,[0,0,0,0,0,0,0,0]),0,u);return wc(r,s,c)},Gy=vu,$y=Fc,Vy=xc,Wy=function(t,e,r,n){if("Object"!==Rc(t))throw new Uc("Assertion failed: `O` must be an Object");if(!Mc(e))throw new Uc("Assertion failed: `P` must be a Property Key");if("boolean"!=typeof n)throw new Uc("Assertion failed: `Throw` must be a Boolean");if(n){if(t[e]=r,Lc&&!jc(t[e],r))throw new Uc("Attempted to assign to readonly property.");return!0}try{return t[e]=r,!Lc||jc(t[e],r)}catch(t){return!1}},Jy=function(t,e,r,n,o,i){var a=Al(t);if(!vl(t)&&!a)throw new yl("Assertion failed: `arrayBuffer` must be an ArrayBuffer or a SharedArrayBuffer");if(!hl(e)||e<0)throw new yl("Assertion failed: `byteIndex` must be a non-negative integer");if("string"!=typeof r||!Sl(El.size,"$"+r))throw new yl("Assertion failed: `type` must be a Typed Array Element Type");if("number"!=typeof n&&"bigint"!=typeof n)throw new yl("Assertion failed: `value` must be a Number or a BigInt");if("boolean"!=typeof o)throw new yl("Assertion failed: `isTypedArray` must be a boolean");if("SEQ-CST"!==i&&"UNORDERED"!==i&&"INIT"!==i)throw new yl('Assertion failed: `order` must be `"SEQ-CST"`, `"UNORDERED"`, or `"INIT"`');if(arguments.length>6&&"boolean"!=typeof arguments[6])throw new yl("Assertion failed: `isLittleEndian` must be a boolean, if present");if(bl(t))throw new yl("Assertion failed: ArrayBuffer is detached");if(gl(r)?"bigint"!=typeof n:"number"!=typeof n)throw new yl("Assertion failed: `value` must be a BigInt if type is ~BIGINT64~ or ~BIGUINT64~, otherwise a Number");var u=El.size["$"+r],c=ml(r,n,arguments.length>6?arguments[6]:"little"===wl);if(a)throw new fl("SharedArrayBuffer is not supported by this implementation");var s=new dl(t,e,u);_l(c,(function(t,e){s[e]=t}))},zy=function(t){var e=Il(t);return Ol(e)||0===e?0:Tl(e)?Pl(e):e},qy=Ds,Hy=Ml,Yy=function(t){var e=Ll(t);if(!1===e)throw new Rl("Assertion failed: `O` must be a TypedArray");var r=Bl.name["$"+e];if("string"!=typeof r)throw new jl("Assertion failed: Unknown TypedArray type `"+e+"`");return r},Xy=function(t,e){if(0===Uy.length)throw new xy("Assertion failed: Typed Arrays are not supported in this environment");var r=Ny(t);if(!r)throw new Cy("Assertion failed: exemplar must be a TypedArray");if(!My(e))throw new Cy("Assertion failed: `argumentList` must be a List");var n=Ly(r);if("function"!=typeof n)throw new xy("Assertion failed: `constructor` of `exemplar` ("+r+") must exist. Please report this!");var o=jy(t,n);return Ry(o,e)},Zy=vy,Ky=uc,Qy=Sf,td=function(t,e){var r=this;Zy(r,"SEQ-CST");var n,o=r.length,i=zy(t);n=i===-1/0?0:i<0?$y(o+i,0):Vy(i,o);var a,u=void 0===e?o:zy(e);a=u===-1/0?0:u<0?$y(o+u,0):Vy(u,o);var c=$y(a-n,0),s=Xy(r,[c]);if(c>0){if(Gy(Ky(r)))throw new By("Cannot use a Typed Array with an underlying ArrayBuffer that is detached");if(Yy(r)===Yy(s))for(var p=Ky(r),l=Ky(s),f=Hy(r),y=n*f+Qy(r),d=Qy(s),h=d+c*f;d<h;){var g=ky(p,y,"UINT8",!0,"UNORDERED");Jy(l,d,"UINT8",g,!0,"UNORDERED"),y+=1,d+=1}else for(var b=0;n<a;){var m=qy(n),v=Dy(r,m);Wy(s,qy(b),v,!0),n+=1,b+=1}}return s},ed=td,rd=function(){return"function"==typeof Uint8Array&&Uint8Array.prototype.slice||ed};var nd=hr("%Object.getPrototypeOf%",!0),od=function(){if(Uf)return Nf;Uf=1;var t={__proto__:null,foo:{}},e=Object;return Nf=function(){return{__proto__:t}.foo===t.foo&&!(t instanceof e)}}()(),id=oi,ad=nd||(od?function(t){return t.__proto__}:null),ud=rd,cd=oi,sd=td,pd=rd,ld=function(){if("function"==typeof Uint8Array){var t=ud(),e=ad(Uint8Array.prototype);id(e,{slice:t},{slice:function(){return e.slice!==t}})}return t},fd=yn(pd());cd(fd,{getPolyfill:pd,implementation:sd,shim:ld});var yd=Un,dd=fd,hd=Xr;function gd(t){return Object.prototype.toString.call(t)}var bd=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function md(t,e){if(t.forEach)return t.forEach(e);for(var r=0;r<t.length;r++)e(t[r],r,t)}var vd=Object.keys||function(t){var e=[];for(var r in t)e.push(r);return e},Ad=Object.prototype.propertyIsEnumerable,Sd=Object.getOwnPropertySymbols;function Ed(t){var e=vd(t);if(Sd)for(var r=Sd(t),n=0;n<r.length;n++)Ad.call(t,r[n])&&e.push(r[n]);return e}var wd=Object.prototype.hasOwnProperty||function(t,e){return e in t};function _d(t,e){if("object"==typeof t&&null!==t){var r;if(bd(t))r=[];else if("[object Date]"===gd(t))r=new Date(t.getTime?t.getTime():t);else if(function(t){return"[object RegExp]"===gd(t)}(t))r=new RegExp(t);else if(function(t){return"[object Error]"===gd(t)}(t))r={message:t.message};else if(function(t){return"[object Boolean]"===gd(t)}(t)||function(t){return"[object Number]"===gd(t)}(t)||function(t){return"[object String]"===gd(t)}(t))r=Object(t);else{if(yd(t))return dd(t);if(Object.create&&Object.getPrototypeOf)r=Object.create(Object.getPrototypeOf(t));else if(t.constructor===Object)r={};else{var n=t.constructor&&t.constructor.prototype||t.__proto__||{},o=function(){};o.prototype=n,r=new o}}return md((e.includeSymbols?Ed:vd)(t),(function(e){r[e]=t[e]})),r}return t}var Id={__proto__:null};function Pd(t,e){var r=[],n=[],o=!0,i=arguments.length>2?arguments[2]:Id,a=i.includeSymbols?Ed:vd,u=!!i.immutable;return function t(c){var s=u?_d(c,i):c,p={},l=!0,f={node:s,node_:c,path:[].concat(r),parent:n[n.length-1],parents:n,key:r[r.length-1],isRoot:0===r.length,level:r.length,circular:null,update:function(t,e){f.isRoot||(f.parent.node[f.key]=t),f.node=t,e&&(l=!1)},delete:function(t){delete f.parent.node[f.key],t&&(l=!1)},remove:function(t){bd(f.parent.node)?f.parent.node.splice(f.key,1):delete f.parent.node[f.key],t&&(l=!1)},keys:null,before:function(t){p.before=t},after:function(t){p.after=t},pre:function(t){p.pre=t},post:function(t){p.post=t},stop:function(){o=!1},block:function(){l=!1}};if(!o)return f;function y(){if("object"==typeof f.node&&null!==f.node){f.keys&&f.node_===f.node||(f.keys=a(f.node)),f.isLeaf=0===f.keys.length;for(var t=0;t<n.length;t++)if(n[t].node_===c){f.circular=n[t];break}}else f.isLeaf=!0,f.keys=null;f.notLeaf=!f.isLeaf,f.notRoot=!f.isRoot}y();var d=e.call(f,f.node);return void 0!==d&&f.update&&f.update(d),p.before&&p.before.call(f,f.node),l?("object"!=typeof f.node||null===f.node||f.circular||(n.push(f),y(),md(f.keys,(function(e,n){r.push(e),p.pre&&p.pre.call(f,f.node[e],e);var o=t(f.node[e]);u&&wd.call(f.node,e)&&!function(t,e){return"function"!=typeof hd||!hd(t,e).writable}(f.node,e)&&(f.node[e]=o.node),o.isLast=n===f.keys.length-1,o.isFirst=0===n,p.post&&p.post.call(f,o),r.pop()})),n.pop()),p.after&&p.after.call(f,f.node),f):f}(t).node}function Od(t){this.options=arguments.length>1?arguments[1]:Id,this.value=t}function Td(t){return new Od(t,arguments.length>1?arguments[1]:Id)}Od.prototype.get=function(t){for(var e=this.value,r=0;e&&r<t.length;r++){var n=t[r];if(!wd.call(e,n)||!this.options.includeSymbols&&"symbol"==typeof n)return;e=e[n]}return e},Od.prototype.has=function(t){for(var e=this.value,r=0;e&&r<t.length;r++){var n=t[r];if(!wd.call(e,n)||!this.options.includeSymbols&&"symbol"==typeof n)return!1;e=e[n]}return!0},Od.prototype.set=function(t,e){for(var r=this.value,n=0;n<t.length-1;n++){var o=t[n];wd.call(r,o)||(r[o]={}),r=r[o]}return r[t[n]]=e,e},Od.prototype.map=function(t){return Pd(this.value,t,{__proto__:null,immutable:!0,includeSymbols:!!this.options.includeSymbols})},Od.prototype.forEach=function(t){return this.value=Pd(this.value,t,this.options),this.value},Od.prototype.reduce=function(t,e){var r=1===arguments.length,n=r?this.value:e;return this.forEach((function(e){this.isRoot&&r||(n=t.call(this,n,e))})),n},Od.prototype.paths=function(){var t=[];return this.forEach((function(){t.push(this.path)})),t},Od.prototype.nodes=function(){var t=[];return this.forEach((function(){t.push(this.node)})),t},Od.prototype.clone=function(){var t=[],e=[],r=this.options;return yd(this.value)?dd(this.value):function n(o){for(var i=0;i<t.length;i++)if(t[i]===o)return e[i];if("object"==typeof o&&null!==o){var a=_d(o,r);return t.push(o),e.push(a),md((r.includeSymbols?Ed:vd)(o),(function(t){a[t]=n(o[t])})),t.pop(),e.pop(),a}return o}(this.value)},md(Ed(Od.prototype),(function(t){Td[t]=function(e){var r=[].slice.call(arguments,1),n=new Od(e);return n[t].apply(n,r)}}));var Fd=Td,xd=Cd;function Cd(t){if(!(this instanceof Cd))return new Cd(t);this._bbox=t||[1/0,1/0,-1/0,-1/0],this._valid=!!t}Cd.prototype.include=function(t){return this._valid=!0,this._bbox[0]=Math.min(this._bbox[0],t[0]),this._bbox[1]=Math.min(this._bbox[1],t[1]),this._bbox[2]=Math.max(this._bbox[2],t[0]),this._bbox[3]=Math.max(this._bbox[3],t[1]),this},Cd.prototype.equals=function(t){var e;return e=t instanceof Cd?t.bbox():t,this._bbox[0]==e[0]&&this._bbox[1]==e[1]&&this._bbox[2]==e[2]&&this._bbox[3]==e[3]},Cd.prototype.center=function(t){return this._valid?[(this._bbox[0]+this._bbox[2])/2,(this._bbox[1]+this._bbox[3])/2]:null},Cd.prototype.union=function(t){var e;return this._valid=!0,e=t instanceof Cd?t.bbox():t,this._bbox[0]=Math.min(this._bbox[0],e[0]),this._bbox[1]=Math.min(this._bbox[1],e[1]),this._bbox[2]=Math.max(this._bbox[2],e[2]),this._bbox[3]=Math.max(this._bbox[3],e[3]),this},Cd.prototype.bbox=function(){return this._valid?this._bbox:null},Cd.prototype.contains=function(t){if(!t)return this._fastContains();if(!this._valid)return null;var e=t[0],r=t[1];return this._bbox[0]<=e&&this._bbox[1]<=r&&this._bbox[2]>=e&&this._bbox[3]>=r},Cd.prototype.intersect=function(t){return this._valid?(e=t instanceof Cd?t.bbox():t,!(this._bbox[0]>e[2]||this._bbox[2]<e[0]||this._bbox[3]<e[1]||this._bbox[1]>e[3])):null;var e},Cd.prototype._fastContains=function(){if(!this._valid)return new Function("return null;");var t="return "+this._bbox[0]+"<= ll[0] &&"+this._bbox[1]+"<= ll[1] &&"+this._bbox[2]+">= ll[0] &&"+this._bbox[3]+">= ll[1]";return new Function("ll",t)},Cd.prototype.polygon=function(){return this._valid?{type:"Polygon",coordinates:[[[this._bbox[0],this._bbox[1]],[this._bbox[2],this._bbox[1]],[this._bbox[2],this._bbox[3]],[this._bbox[0],this._bbox[3]],[this._bbox[0],this._bbox[1]]]]}:null};var Nd=function(t){if(!t)return[];var e=jt(Mt(t)),r=[];return e.features.forEach((function(t){t.geometry&&(r=r.concat(Rt(t.geometry.coordinates)))})),r},Ud=Fd,Md=xd,jd={features:["FeatureCollection"],coordinates:["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],geometry:["Feature"],geometries:["GeometryCollection"]},Rd=Object.keys(jd);function Ld(t){for(var e=Md(),r=Nd(t),n=0;n<r.length;n++)e.include(r[n]);return e}Ft.exports=function(t){return Ld(t).bbox()},Ft.exports.polygon=function(t){return Ld(t).polygon()},Ft.exports.bboxify=function(t){return Ud(t).map((function(t){t&&(Rd.some((function(e){return!!t[e]&&-1!==jd[e].indexOf(t.type)}))&&(t.bbox=Ld(t).bbox(),this.update(t)))}))};var Bd=e(Ft.exports),Dd=-90,kd=90,Gd=A,$d=S,Vd=-270,Wd=270;function Jd(t,e){var r=Dd,n=kd,o=Dd,i=kd,a=Wd,u=Vd;t.forEach((function(t){var e=Bd(t),c=e[1],s=e[3],p=e[0],l=e[2];c>r&&(r=c),s<n&&(n=s),s>o&&(o=s),c<i&&(i=c),p<a&&(a=p),l>u&&(u=l)}));var c=e;return r+c.lat>$d&&(c.lat=$d-r),o+c.lat>kd&&(c.lat=kd-o),n+c.lat<Gd&&(c.lat=Gd-n),i+c.lat<Dd&&(c.lat=Dd-i),a+c.lng<=Vd&&(c.lng+=360*Math.ceil(Math.abs(c.lng)/360)),u+c.lng>=Wd&&(c.lng-=360*Math.ceil(Math.abs(c.lng)/360)),c}function zd(t,e){var r=Jd(t.map((function(t){return t.toGeoJSON()})),e);t.forEach((function(t){var e,n=t.getCoordinates(),o=function(t){var e={lng:t[0]+r.lng,lat:t[1]+r.lat};return[e.lng,e.lat]},i=function(t){return t.map((function(t){return o(t)}))};t.type===y.POINT?e=o(n):t.type===y.LINE_STRING||t.type===y.MULTI_POINT?e=n.map(o):t.type===y.POLYGON||t.type===y.MULTI_LINE_STRING?e=n.map(i):t.type===y.MULTI_POLYGON&&(e=n.map((function(t){return t.map((function(t){return i(t)}))}))),t.incomingCoords(e)}))}var qd={onSetup:function(t){var e=this,r={dragMoveLocation:null,boxSelectStartLocation:null,boxSelectElement:void 0,boxSelecting:!1,canBoxSelect:!1,dragMoving:!1,canDragMove:!1,initiallySelectedFeatureIds:t.featureIds||[]};return this.setSelected(r.initiallySelectedFeatureIds.filter((function(t){return void 0!==e.getFeature(t)}))),this.fireActionable(),this.setActionableState({combineFeatures:!0,uncombineFeatures:!0,trash:!0}),r},fireUpdate:function(){this.map.fire(h.UPDATE,{action:g.MOVE,features:this.getSelected().map((function(t){return t.toGeoJSON()}))})},fireActionable:function(){var t=this,e=this.getSelected(),r=e.filter((function(e){return t.isInstanceOf("MultiFeature",e)})),n=!1;if(e.length>1){n=!0;var o=e[0].type.replace("Multi","");e.forEach((function(t){t.type.replace("Multi","")!==o&&(n=!1)}))}var i=r.length>0,a=e.length>0;this.setActionableState({combineFeatures:n,uncombineFeatures:i,trash:a})},getUniqueIds:function(t){return t.length?t.map((function(t){return t.properties.id})).filter((function(t){return void 0!==t})).reduce((function(t,e){return t.add(e),t}),new O).values():[]},stopExtendedInteractions:function(t){t.boxSelectElement&&(t.boxSelectElement.parentNode&&t.boxSelectElement.parentNode.removeChild(t.boxSelectElement),t.boxSelectElement=null),this.map.dragPan.enable(),t.boxSelecting=!1,t.canBoxSelect=!1,t.dragMoving=!1,t.canDragMove=!1},onStop:function(){Tt.enable(this)},onMouseMove:function(t,e){return ht(e)&&t.dragMoving&&this.fireUpdate(),this.stopExtendedInteractions(t),!0},onMouseOut:function(t){return!t.dragMoving||this.fireUpdate()}};qd.onTap=qd.onClick=function(t,e){return dt(e)?this.clickAnywhere(t,e):pt(b.VERTEX)(e)?this.clickOnVertex(t,e):ht(e)?this.clickOnFeature(t,e):void 0},qd.clickAnywhere=function(t){var e=this,r=this.getSelectedIds();r.length&&(this.clearSelectedFeatures(),r.forEach((function(t){return e.doRender(t)}))),Tt.enable(this),this.stopExtendedInteractions(t)},qd.clickOnVertex=function(t,e){this.changeMode(d.DIRECT_SELECT,{featureId:e.featureTarget.properties.parent,coordPath:e.featureTarget.properties.coord_path,startPos:e.lngLat}),this.updateUIClasses({mouse:l.MOVE})},qd.startOnActiveFeature=function(t,e){this.stopExtendedInteractions(t),this.map.dragPan.disable(),this.doRender(e.featureTarget.properties.id),t.canDragMove=!0,t.dragMoveLocation=e.lngLat},qd.clickOnFeature=function(t,e){var r=this;Tt.disable(this),this.stopExtendedInteractions(t);var n=bt(e),o=this.getSelectedIds(),i=e.featureTarget.properties.id,a=this.isSelected(i);if(!n&&a&&this.getFeature(i).type!==y.POINT)return this.changeMode(d.DIRECT_SELECT,{featureId:i});a&&n?(this.deselect(i),this.updateUIClasses({mouse:l.POINTER}),1===o.length&&Tt.enable(this)):!a&&n?(this.select(i),this.updateUIClasses({mouse:l.MOVE})):a||n||(o.forEach((function(t){return r.doRender(t)})),this.setSelected(i),this.updateUIClasses({mouse:l.MOVE})),this.doRender(i)},qd.onMouseDown=function(t,e){return ft(e)?this.startOnActiveFeature(t,e):this.drawConfig.boxSelect&&lt(e)?this.startBoxSelect(t,e):void 0},qd.startBoxSelect=function(t,e){this.stopExtendedInteractions(t),this.map.dragPan.disable(),t.boxSelectStartLocation=_t(e.originalEvent,this.map.getContainer()),t.canBoxSelect=!0},qd.onTouchStart=function(t,e){if(ft(e))return this.startOnActiveFeature(t,e)},qd.onDrag=function(t,e){return t.canDragMove?this.dragMove(t,e):this.drawConfig.boxSelect&&t.canBoxSelect?this.whileBoxSelect(t,e):void 0},qd.whileBoxSelect=function(t,e){t.boxSelecting=!0,this.updateUIClasses({mouse:l.ADD}),t.boxSelectElement||(t.boxSelectElement=document.createElement("div"),t.boxSelectElement.classList.add(s.BOX_SELECT),this.map.getContainer().appendChild(t.boxSelectElement));var r=_t(e.originalEvent,this.map.getContainer()),n=Math.min(t.boxSelectStartLocation.x,r.x),o=Math.max(t.boxSelectStartLocation.x,r.x),i=Math.min(t.boxSelectStartLocation.y,r.y),a=Math.max(t.boxSelectStartLocation.y,r.y),u="translate("+n+"px, "+i+"px)";t.boxSelectElement.style.transform=u,t.boxSelectElement.style.WebkitTransform=u,t.boxSelectElement.style.width=o-n+"px",t.boxSelectElement.style.height=a-i+"px"},qd.dragMove=function(t,e){t.dragMoving=!0,e.originalEvent.stopPropagation();var r={lng:e.lngLat.lng-t.dragMoveLocation.lng,lat:e.lngLat.lat-t.dragMoveLocation.lat};zd(this.getSelected(),r),t.dragMoveLocation=e.lngLat},qd.onTouchEnd=qd.onMouseUp=function(t,e){var r=this;if(t.dragMoving)this.fireUpdate();else if(t.boxSelecting){var n=[t.boxSelectStartLocation,_t(e.originalEvent,this.map.getContainer())],o=this.featuresAt(null,n,"click"),i=this.getUniqueIds(o).filter((function(t){return!r.isSelected(t)}));i.length&&(this.select(i),i.forEach((function(t){return r.doRender(t)})),this.updateUIClasses({mouse:l.MOVE}))}this.stopExtendedInteractions(t)},qd.toDisplayFeatures=function(t,e,r){e.properties.active=this.isSelected(e.properties.id)?m.ACTIVE:m.INACTIVE,r(e),this.fireActionable(),e.properties.active===m.ACTIVE&&e.geometry.type!==y.POINT&&Ot(e).forEach(r)},qd.onTrash=function(){this.deleteFeature(this.getSelectedIds()),this.fireActionable()},qd.onCombineFeatures=function(){var t=this.getSelected();if(!(0===t.length||t.length<2)){for(var e=[],r=[],n=t[0].type.replace("Multi",""),o=0;o<t.length;o++){var i=t[o];if(i.type.replace("Multi","")!==n)return;i.type.includes("Multi")?i.getCoordinates().forEach((function(t){e.push(t)})):e.push(i.getCoordinates()),r.push(i.toGeoJSON())}if(r.length>1){var a=this.newFeature({type:y.FEATURE,properties:r[0].properties,geometry:{type:"Multi"+n,coordinates:e}});this.addFeature(a),this.deleteFeature(this.getSelectedIds(),{silent:!0}),this.setSelected([a.id]),this.map.fire(h.COMBINE_FEATURES,{createdFeatures:[a.toGeoJSON()],deletedFeatures:r})}this.fireActionable()}},qd.onUncombineFeatures=function(){var t=this,e=this.getSelected();if(0!==e.length){for(var r=[],n=[],o=function(o){var i=e[o];t.isInstanceOf("MultiFeature",i)&&(i.getFeatures().forEach((function(e){t.addFeature(e),e.properties=i.properties,r.push(e.toGeoJSON()),t.select([e.id])})),t.deleteFeature(i.id,{silent:!0}),n.push(i.toGeoJSON()))},i=0;i<e.length;i++)o(i);r.length>1&&this.map.fire(h.UNCOMBINE_FEATURES,{createdFeatures:r,deletedFeatures:n}),this.fireActionable()}};var Hd=pt(b.VERTEX),Yd=pt(b.MIDPOINT),Xd={fireUpdate:function(){this.map.fire(h.UPDATE,{action:g.CHANGE_COORDINATES,features:this.getSelected().map((function(t){return t.toGeoJSON()}))})},fireActionable:function(t){this.setActionableState({combineFeatures:!1,uncombineFeatures:!1,trash:t.selectedCoordPaths.length>0})},startDragging:function(t,e){this.map.dragPan.disable(),t.canDragMove=!0,t.dragMoveLocation=e.lngLat},stopDragging:function(t){this.map.dragPan.enable(),t.dragMoving=!1,t.canDragMove=!1,t.dragMoveLocation=null},onVertex:function(t,e){this.startDragging(t,e);var r=e.featureTarget.properties,n=t.selectedCoordPaths.indexOf(r.coord_path);bt(e)||-1!==n?bt(e)&&-1===n&&t.selectedCoordPaths.push(r.coord_path):t.selectedCoordPaths=[r.coord_path];var o=this.pathsToCoordinates(t.featureId,t.selectedCoordPaths);this.setSelectedCoordinates(o)},onMidpoint:function(t,e){this.startDragging(t,e);var r=e.featureTarget.properties;t.feature.addCoordinate(r.coord_path,r.lng,r.lat),this.fireUpdate(),t.selectedCoordPaths=[r.coord_path]},pathsToCoordinates:function(t,e){return e.map((function(e){return{feature_id:t,coord_path:e}}))},onFeature:function(t,e){0===t.selectedCoordPaths.length?this.startDragging(t,e):this.stopDragging(t)},dragFeature:function(t,e,r){zd(this.getSelected(),r),t.dragMoveLocation=e.lngLat},dragVertex:function(t,e,r){for(var n=t.selectedCoordPaths.map((function(e){return t.feature.getCoordinate(e)})),o=Jd(n.map((function(t){return{type:y.FEATURE,properties:{},geometry:{type:y.POINT,coordinates:t}}})),r),i=0;i<n.length;i++){var a=n[i];t.feature.updateCoordinate(t.selectedCoordPaths[i],a[0]+o.lng,a[1]+o.lat)}},clickNoTarget:function(){this.changeMode(d.SIMPLE_SELECT)},clickInactive:function(){this.changeMode(d.SIMPLE_SELECT)},clickActiveFeature:function(t){t.selectedCoordPaths=[],this.clearSelectedCoordinates(),t.feature.changed()},onSetup:function(t){var e=t.featureId,r=this.getFeature(e);if(!r)throw new Error("You must provide a featureId to enter direct_select mode");if(r.type===y.POINT)throw new TypeError("direct_select mode doesn't handle point features");var n={featureId:e,feature:r,dragMoveLocation:t.startPos||null,dragMoving:!1,canDragMove:!1,selectedCoordPaths:t.coordPath?[t.coordPath]:[]};return this.setSelectedCoordinates(this.pathsToCoordinates(e,n.selectedCoordPaths)),this.setSelected(e),Tt.disable(this),this.setActionableState({trash:!0}),n},onStop:function(){Tt.enable(this),this.clearSelectedCoordinates()},toDisplayFeatures:function(t,e,r){t.featureId===e.properties.id?(e.properties.active=m.ACTIVE,r(e),Ot(e,{map:this.map,midpoints:!0,selectedPaths:t.selectedCoordPaths}).forEach(r)):(e.properties.active=m.INACTIVE,r(e)),this.fireActionable(t)},onTrash:function(t){t.selectedCoordPaths.sort((function(t,e){return e.localeCompare(t,"en",{numeric:!0})})).forEach((function(e){return t.feature.removeCoordinate(e)})),this.fireUpdate(),t.selectedCoordPaths=[],this.clearSelectedCoordinates(),this.fireActionable(t),!1===t.feature.isValid()&&(this.deleteFeature([t.featureId]),this.changeMode(d.SIMPLE_SELECT,{}))},onMouseMove:function(t,e){var r=ft(e),n=Hd(e),o=Yd(e),i=0===t.selectedCoordPaths.length;return r&&i||n&&!i?this.updateUIClasses({mouse:l.MOVE}):this.updateUIClasses({mouse:l.NONE}),(n||r||o)&&t.dragMoving&&this.fireUpdate(),this.stopDragging(t),!0},onMouseOut:function(t){return t.dragMoving&&this.fireUpdate(),!0}};Xd.onTouchStart=Xd.onMouseDown=function(t,e){return Hd(e)?this.onVertex(t,e):ft(e)?this.onFeature(t,e):Yd(e)?this.onMidpoint(t,e):void 0},Xd.onDrag=function(t,e){if(!0===t.canDragMove){t.dragMoving=!0,e.originalEvent.stopPropagation();var r={lng:e.lngLat.lng-t.dragMoveLocation.lng,lat:e.lngLat.lat-t.dragMoveLocation.lat};t.selectedCoordPaths.length>0?this.dragVertex(t,e,r):this.dragFeature(t,e,r),t.dragMoveLocation=e.lngLat}},Xd.onClick=function(t,e){return dt(e)?this.clickNoTarget(t,e):ft(e)?this.clickActiveFeature(t,e):yt(e)?this.clickInactive(t,e):void this.stopDragging(t)},Xd.onTap=function(t,e){return dt(e)?this.clickNoTarget(t,e):ft(e)?this.clickActiveFeature(t,e):yt(e)?this.clickInactive(t,e):void 0},Xd.onTouchEnd=Xd.onMouseUp=function(t){t.dragMoving&&this.fireUpdate(),this.stopDragging(t)};var Zd={};function Kd(t,e){return!!t.lngLat&&(t.lngLat.lng===e[0]&&t.lngLat.lat===e[1])}Zd.onSetup=function(){var t=this.newFeature({type:y.FEATURE,properties:{},geometry:{type:y.POINT,coordinates:[]}});return this.addFeature(t),this.clearSelectedFeatures(),this.updateUIClasses({mouse:l.ADD}),this.activateUIButton(f.POINT),this.setActionableState({trash:!0}),{point:t}},Zd.stopDrawingAndRemove=function(t){this.deleteFeature([t.point.id],{silent:!0}),this.changeMode(d.SIMPLE_SELECT)},Zd.onTap=Zd.onClick=function(t,e){this.updateUIClasses({mouse:l.MOVE}),t.point.updateCoordinate("",e.lngLat.lng,e.lngLat.lat),this.map.fire(h.CREATE,{features:[t.point.toGeoJSON()]}),this.changeMode(d.SIMPLE_SELECT,{featureIds:[t.point.id]})},Zd.onStop=function(t){this.activateUIButton(),t.point.getCoordinate().length||this.deleteFeature([t.point.id],{silent:!0})},Zd.toDisplayFeatures=function(t,e,r){var n=e.properties.id===t.point.id;if(e.properties.active=n?m.ACTIVE:m.INACTIVE,!n)return r(e)},Zd.onTrash=Zd.stopDrawingAndRemove,Zd.onKeyUp=function(t,e){if(mt(e)||vt(e))return this.stopDrawingAndRemove(t,e)};var Qd={onSetup:function(){var t=this.newFeature({type:y.FEATURE,properties:{},geometry:{type:y.POLYGON,coordinates:[[]]}});return this.addFeature(t),this.clearSelectedFeatures(),Tt.disable(this),this.updateUIClasses({mouse:l.ADD}),this.activateUIButton(f.POLYGON),this.setActionableState({trash:!0}),{polygon:t,currentVertexPosition:0}},clickAnywhere:function(t,e){if(t.currentVertexPosition>0&&Kd(e,t.polygon.coordinates[0][t.currentVertexPosition-1]))return this.changeMode(d.SIMPLE_SELECT,{featureIds:[t.polygon.id]});this.updateUIClasses({mouse:l.ADD}),t.polygon.updateCoordinate("0."+t.currentVertexPosition,e.lngLat.lng,e.lngLat.lat),t.currentVertexPosition++,t.polygon.updateCoordinate("0."+t.currentVertexPosition,e.lngLat.lng,e.lngLat.lat)},clickOnVertex:function(t){return this.changeMode(d.SIMPLE_SELECT,{featureIds:[t.polygon.id]})},onMouseMove:function(t,e){t.polygon.updateCoordinate("0."+t.currentVertexPosition,e.lngLat.lng,e.lngLat.lat),gt(e)&&this.updateUIClasses({mouse:l.POINTER})}};Qd.onTap=Qd.onClick=function(t,e){return gt(e)?this.clickOnVertex(t,e):this.clickAnywhere(t,e)},Qd.onKeyUp=function(t,e){mt(e)?(this.deleteFeature([t.polygon.id],{silent:!0}),this.changeMode(d.SIMPLE_SELECT)):vt(e)&&this.changeMode(d.SIMPLE_SELECT,{featureIds:[t.polygon.id]})},Qd.onStop=function(t){this.updateUIClasses({mouse:l.NONE}),Tt.enable(this),this.activateUIButton(),void 0!==this.getFeature(t.polygon.id)&&(t.polygon.removeCoordinate("0."+t.currentVertexPosition),t.polygon.isValid()?this.map.fire(h.CREATE,{features:[t.polygon.toGeoJSON()]}):(this.deleteFeature([t.polygon.id],{silent:!0}),this.changeMode(d.SIMPLE_SELECT,{},{silent:!0})))},Qd.toDisplayFeatures=function(t,e,r){var n=e.properties.id===t.polygon.id;if(e.properties.active=n?m.ACTIVE:m.INACTIVE,!n)return r(e);if(0!==e.geometry.coordinates.length){var o=e.geometry.coordinates[0].length;if(!(o<3)){if(e.properties.meta=b.FEATURE,r(It(t.polygon.id,e.geometry.coordinates[0][0],"0.0",!1)),o>3){var i=e.geometry.coordinates[0].length-3;r(It(t.polygon.id,e.geometry.coordinates[0][i],"0."+i,!1))}if(o<=4){var a=[[e.geometry.coordinates[0][0][0],e.geometry.coordinates[0][0][1]],[e.geometry.coordinates[0][1][0],e.geometry.coordinates[0][1][1]]];if(r({type:y.FEATURE,properties:e.properties,geometry:{coordinates:a,type:y.LINE_STRING}}),3===o)return}return r(e)}}},Qd.onTrash=function(t){this.deleteFeature([t.polygon.id],{silent:!0}),this.changeMode(d.SIMPLE_SELECT)};var th={onSetup:function(t){var e,r,n=(t=t||{}).featureId,o="forward";if(n){if(!(e=this.getFeature(n)))throw new Error("Could not find a feature with the provided featureId");var i=t.from;if(i&&"Feature"===i.type&&i.geometry&&"Point"===i.geometry.type&&(i=i.geometry),i&&"Point"===i.type&&i.coordinates&&2===i.coordinates.length&&(i=i.coordinates),!i||!Array.isArray(i))throw new Error("Please use the `from` property to indicate which point to continue the line from");var a=e.coordinates.length-1;if(e.coordinates[a][0]===i[0]&&e.coordinates[a][1]===i[1])r=a+1,e.addCoordinate.apply(e,[r].concat(e.coordinates[a]));else{if(e.coordinates[0][0]!==i[0]||e.coordinates[0][1]!==i[1])throw new Error("`from` should match the point at either the start or the end of the provided LineString");o="backwards",r=0,e.addCoordinate.apply(e,[r].concat(e.coordinates[0]))}}else e=this.newFeature({type:y.FEATURE,properties:{},geometry:{type:y.LINE_STRING,coordinates:[]}}),r=0,this.addFeature(e);return this.clearSelectedFeatures(),Tt.disable(this),this.updateUIClasses({mouse:l.ADD}),this.activateUIButton(f.LINE),this.setActionableState({trash:!0}),{line:e,currentVertexPosition:r,direction:o}},clickAnywhere:function(t,e){if(t.currentVertexPosition>0&&Kd(e,t.line.coordinates[t.currentVertexPosition-1])||"backwards"===t.direction&&Kd(e,t.line.coordinates[t.currentVertexPosition+1]))return this.changeMode(d.SIMPLE_SELECT,{featureIds:[t.line.id]});this.updateUIClasses({mouse:l.ADD}),t.line.updateCoordinate(t.currentVertexPosition,e.lngLat.lng,e.lngLat.lat),"forward"===t.direction?(t.currentVertexPosition++,t.line.updateCoordinate(t.currentVertexPosition,e.lngLat.lng,e.lngLat.lat)):t.line.addCoordinate(0,e.lngLat.lng,e.lngLat.lat)},clickOnVertex:function(t){return this.changeMode(d.SIMPLE_SELECT,{featureIds:[t.line.id]})},onMouseMove:function(t,e){t.line.updateCoordinate(t.currentVertexPosition,e.lngLat.lng,e.lngLat.lat),gt(e)&&this.updateUIClasses({mouse:l.POINTER})}};th.onTap=th.onClick=function(t,e){if(gt(e))return this.clickOnVertex(t,e);this.clickAnywhere(t,e)},th.onKeyUp=function(t,e){vt(e)?this.changeMode(d.SIMPLE_SELECT,{featureIds:[t.line.id]}):mt(e)&&(this.deleteFeature([t.line.id],{silent:!0}),this.changeMode(d.SIMPLE_SELECT))},th.onStop=function(t){Tt.enable(this),this.activateUIButton(),void 0!==this.getFeature(t.line.id)&&(t.line.removeCoordinate(""+t.currentVertexPosition),t.line.isValid()?this.map.fire(h.CREATE,{features:[t.line.toGeoJSON()]}):(this.deleteFeature([t.line.id],{silent:!0}),this.changeMode(d.SIMPLE_SELECT,{},{silent:!0})))},th.onTrash=function(t){this.deleteFeature([t.line.id],{silent:!0}),this.changeMode(d.SIMPLE_SELECT)},th.toDisplayFeatures=function(t,e,r){var n=e.properties.id===t.line.id;if(e.properties.active=n?m.ACTIVE:m.INACTIVE,!n)return r(e);e.geometry.coordinates.length<2||(e.properties.meta=b.FEATURE,r(It(t.line.id,e.geometry.coordinates["forward"===t.direction?e.geometry.coordinates.length-2:1],""+("forward"===t.direction?e.geometry.coordinates.length-2:1),!1)),r(e))};var eh={simple_select:qd,direct_select:Xd,draw_point:Zd,draw_polygon:Qd,draw_line_string:th},rh={defaultMode:d.SIMPLE_SELECT,keybindings:!0,touchEnabled:!0,clickBuffer:2,touchBuffer:25,boxSelect:!0,displayControlsDefault:!0,styles:st,modes:eh,controls:{},userProperties:!1},nh={point:!0,line_string:!0,polygon:!0,trash:!0,combine_features:!0,uncombine_features:!0},oh={point:!1,line_string:!1,polygon:!1,trash:!1,combine_features:!1,uncombine_features:!1};function ih(t,e){return t.map((function(t){return t.source?t:at(t,{id:t.id+"."+e,source:"hot"===e?p.HOT:p.COLD})}))}var ah={exports:{}};!function(t,e){var r="__lodash_hash_undefined__",n=1,o=2,i=9007199254740991,a="[object Arguments]",u="[object Array]",c="[object AsyncFunction]",s="[object Boolean]",p="[object Date]",l="[object Error]",f="[object Function]",y="[object GeneratorFunction]",d="[object Map]",h="[object Number]",g="[object Null]",b="[object Object]",m="[object Promise]",v="[object Proxy]",A="[object RegExp]",S="[object Set]",E="[object String]",w="[object Symbol]",_="[object Undefined]",I="[object WeakMap]",P="[object ArrayBuffer]",O="[object DataView]",T=/^\[object .+?Constructor\]$/,F=/^(?:0|[1-9]\d*)$/,x={};x["[object Float32Array]"]=x["[object Float64Array]"]=x["[object Int8Array]"]=x["[object Int16Array]"]=x["[object Int32Array]"]=x["[object Uint8Array]"]=x["[object Uint8ClampedArray]"]=x["[object Uint16Array]"]=x["[object Uint32Array]"]=!0,x[a]=x[u]=x[P]=x[s]=x[O]=x[p]=x[l]=x[f]=x[d]=x[h]=x[b]=x[A]=x[S]=x[E]=x[I]=!1;var C="object"==typeof global&&global&&global.Object===Object&&global,N="object"==typeof self&&self&&self.Object===Object&&self,U=C||N||Function("return this")(),M=e&&!e.nodeType&&e,j=M&&t&&!t.nodeType&&t,R=j&&j.exports===M,L=R&&C.process,B=function(){try{return L&&L.binding&&L.binding("util")}catch(t){}}(),D=B&&B.isTypedArray;function k(t,e){for(var r=-1,n=null==t?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1}function G(t,e){return t.has(e)}function $(t){var e=-1,r=Array(t.size);return t.forEach((function(t,n){r[++e]=[n,t]})),r}function V(t){var e=-1,r=Array(t.size);return t.forEach((function(t){r[++e]=t})),r}var W,J,z,q=Array.prototype,H=Function.prototype,Y=Object.prototype,X=U["__core-js_shared__"],Z=H.toString,K=Y.hasOwnProperty,Q=(W=/[^.]+$/.exec(X&&X.keys&&X.keys.IE_PROTO||""))?"Symbol(src)_1."+W:"",tt=Y.toString,et=RegExp("^"+Z.call(K).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),rt=R?U.Buffer:void 0,nt=U.Symbol,ot=U.Uint8Array,it=Y.propertyIsEnumerable,at=q.splice,ut=nt?nt.toStringTag:void 0,ct=Object.getOwnPropertySymbols,st=rt?rt.isBuffer:void 0,pt=(J=Object.keys,z=Object,function(t){return J(z(t))}),lt=Dt(U,"DataView"),ft=Dt(U,"Map"),yt=Dt(U,"Promise"),dt=Dt(U,"Set"),ht=Dt(U,"WeakMap"),gt=Dt(Object,"create"),bt=Vt(lt),mt=Vt(ft),vt=Vt(yt),At=Vt(dt),St=Vt(ht),Et=nt?nt.prototype:void 0,wt=Et?Et.valueOf:void 0;function _t(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function It(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function Pt(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function Ot(t){var e=-1,r=null==t?0:t.length;for(this.__data__=new Pt;++e<r;)this.add(t[e])}function Tt(t){var e=this.__data__=new It(t);this.size=e.size}function Ft(t,e){var r=zt(t),n=!r&&Jt(t),o=!r&&!n&&qt(t),i=!r&&!n&&!o&&Kt(t),a=r||n||o||i,u=a?function(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}(t.length,String):[],c=u.length;for(var s in t)!e&&!K.call(t,s)||a&&("length"==s||o&&("offset"==s||"parent"==s)||i&&("buffer"==s||"byteLength"==s||"byteOffset"==s)||$t(s,c))||u.push(s);return u}function xt(t,e){for(var r=t.length;r--;)if(Wt(t[r][0],e))return r;return-1}function Ct(t){return null==t?void 0===t?_:g:ut&&ut in Object(t)?function(t){var e=K.call(t,ut),r=t[ut];try{t[ut]=void 0;var n=!0}catch(t){}var o=tt.call(t);n&&(e?t[ut]=r:delete t[ut]);return o}(t):function(t){return tt.call(t)}(t)}function Nt(t){return Zt(t)&&Ct(t)==a}function Ut(t,e,r,i,c){return t===e||(null==t||null==e||!Zt(t)&&!Zt(e)?t!=t&&e!=e:function(t,e,r,i,c,f){var y=zt(t),g=zt(e),m=y?u:Gt(t),v=g?u:Gt(e),_=(m=m==a?b:m)==b,I=(v=v==a?b:v)==b,T=m==v;if(T&&qt(t)){if(!qt(e))return!1;y=!0,_=!1}if(T&&!_)return f||(f=new Tt),y||Kt(t)?Rt(t,e,r,i,c,f):function(t,e,r,i,a,u,c){switch(r){case O:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case P:return!(t.byteLength!=e.byteLength||!u(new ot(t),new ot(e)));case s:case p:case h:return Wt(+t,+e);case l:return t.name==e.name&&t.message==e.message;case A:case E:return t==e+"";case d:var f=$;case S:var y=i&n;if(f||(f=V),t.size!=e.size&&!y)return!1;var g=c.get(t);if(g)return g==e;i|=o,c.set(t,e);var b=Rt(f(t),f(e),i,a,u,c);return c.delete(t),b;case w:if(wt)return wt.call(t)==wt.call(e)}return!1}(t,e,m,r,i,c,f);if(!(r&n)){var F=_&&K.call(t,"__wrapped__"),x=I&&K.call(e,"__wrapped__");if(F||x){var C=F?t.value():t,N=x?e.value():e;return f||(f=new Tt),c(C,N,r,i,f)}}if(!T)return!1;return f||(f=new Tt),function(t,e,r,o,i,a){var u=r&n,c=Lt(t),s=c.length,p=Lt(e),l=p.length;if(s!=l&&!u)return!1;var f=s;for(;f--;){var y=c[f];if(!(u?y in e:K.call(e,y)))return!1}var d=a.get(t);if(d&&a.get(e))return d==e;var h=!0;a.set(t,e),a.set(e,t);var g=u;for(;++f<s;){var b=t[y=c[f]],m=e[y];if(o)var v=u?o(m,b,y,e,t,a):o(b,m,y,t,e,a);if(!(void 0===v?b===m||i(b,m,r,o,a):v)){h=!1;break}g||(g="constructor"==y)}if(h&&!g){var A=t.constructor,S=e.constructor;A==S||!("constructor"in t)||!("constructor"in e)||"function"==typeof A&&A instanceof A&&"function"==typeof S&&S instanceof S||(h=!1)}return a.delete(t),a.delete(e),h}(t,e,r,i,c,f)}(t,e,r,i,Ut,c))}function Mt(t){return!(!Xt(t)||function(t){return!!Q&&Q in t}(t))&&(Ht(t)?et:T).test(Vt(t))}function jt(t){if(r=(e=t)&&e.constructor,n="function"==typeof r&&r.prototype||Y,e!==n)return pt(t);var e,r,n,o=[];for(var i in Object(t))K.call(t,i)&&"constructor"!=i&&o.push(i);return o}function Rt(t,e,r,i,a,u){var c=r&n,s=t.length,p=e.length;if(s!=p&&!(c&&p>s))return!1;var l=u.get(t);if(l&&u.get(e))return l==e;var f=-1,y=!0,d=r&o?new Ot:void 0;for(u.set(t,e),u.set(e,t);++f<s;){var h=t[f],g=e[f];if(i)var b=c?i(g,h,f,e,t,u):i(h,g,f,t,e,u);if(void 0!==b){if(b)continue;y=!1;break}if(d){if(!k(e,(function(t,e){if(!G(d,e)&&(h===t||a(h,t,r,i,u)))return d.push(e)}))){y=!1;break}}else if(h!==g&&!a(h,g,r,i,u)){y=!1;break}}return u.delete(t),u.delete(e),y}function Lt(t){return function(t,e,r){var n=e(t);return zt(t)?n:function(t,e){for(var r=-1,n=e.length,o=t.length;++r<n;)t[o+r]=e[r];return t}(n,r(t))}(t,Qt,kt)}function Bt(t,e){var r=t.__data__;return function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}(e)?r["string"==typeof e?"string":"hash"]:r.map}function Dt(t,e){var r=function(t,e){return null==t?void 0:t[e]}(t,e);return Mt(r)?r:void 0}_t.prototype.clear=function(){this.__data__=gt?gt(null):{},this.size=0},_t.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},_t.prototype.get=function(t){var e=this.__data__;if(gt){var n=e[t];return n===r?void 0:n}return K.call(e,t)?e[t]:void 0},_t.prototype.has=function(t){var e=this.__data__;return gt?void 0!==e[t]:K.call(e,t)},_t.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=gt&&void 0===e?r:e,this},It.prototype.clear=function(){this.__data__=[],this.size=0},It.prototype.delete=function(t){var e=this.__data__,r=xt(e,t);return!(r<0)&&(r==e.length-1?e.pop():at.call(e,r,1),--this.size,!0)},It.prototype.get=function(t){var e=this.__data__,r=xt(e,t);return r<0?void 0:e[r][1]},It.prototype.has=function(t){return xt(this.__data__,t)>-1},It.prototype.set=function(t,e){var r=this.__data__,n=xt(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this},Pt.prototype.clear=function(){this.size=0,this.__data__={hash:new _t,map:new(ft||It),string:new _t}},Pt.prototype.delete=function(t){var e=Bt(this,t).delete(t);return this.size-=e?1:0,e},Pt.prototype.get=function(t){return Bt(this,t).get(t)},Pt.prototype.has=function(t){return Bt(this,t).has(t)},Pt.prototype.set=function(t,e){var r=Bt(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this},Ot.prototype.add=Ot.prototype.push=function(t){return this.__data__.set(t,r),this},Ot.prototype.has=function(t){return this.__data__.has(t)},Tt.prototype.clear=function(){this.__data__=new It,this.size=0},Tt.prototype.delete=function(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r},Tt.prototype.get=function(t){return this.__data__.get(t)},Tt.prototype.has=function(t){return this.__data__.has(t)},Tt.prototype.set=function(t,e){var r=this.__data__;if(r instanceof It){var n=r.__data__;if(!ft||n.length<199)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new Pt(n)}return r.set(t,e),this.size=r.size,this};var kt=ct?function(t){return null==t?[]:(t=Object(t),function(t,e){for(var r=-1,n=null==t?0:t.length,o=0,i=[];++r<n;){var a=t[r];e(a,r,t)&&(i[o++]=a)}return i}(ct(t),(function(e){return it.call(t,e)})))}:function(){return[]},Gt=Ct;function $t(t,e){return!!(e=null==e?i:e)&&("number"==typeof t||F.test(t))&&t>-1&&t%1==0&&t<e}function Vt(t){if(null!=t){try{return Z.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function Wt(t,e){return t===e||t!=t&&e!=e}(lt&&Gt(new lt(new ArrayBuffer(1)))!=O||ft&&Gt(new ft)!=d||yt&&Gt(yt.resolve())!=m||dt&&Gt(new dt)!=S||ht&&Gt(new ht)!=I)&&(Gt=function(t){var e=Ct(t),r=e==b?t.constructor:void 0,n=r?Vt(r):"";if(n)switch(n){case bt:return O;case mt:return d;case vt:return m;case At:return S;case St:return I}return e});var Jt=Nt(function(){return arguments}())?Nt:function(t){return Zt(t)&&K.call(t,"callee")&&!it.call(t,"callee")},zt=Array.isArray;var qt=st||function(){return!1};function Ht(t){if(!Xt(t))return!1;var e=Ct(t);return e==f||e==y||e==c||e==v}function Yt(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=i}function Xt(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function Zt(t){return null!=t&&"object"==typeof t}var Kt=D?function(t){return function(e){return t(e)}}(D):function(t){return Zt(t)&&Yt(t.length)&&!!x[Ct(t)]};function Qt(t){return null!=(e=t)&&Yt(e.length)&&!Ht(e)?Ft(t):jt(t);var e}t.exports=function(t,e){return Ut(t,e)}}(ah,ah.exports);var uh=e(ah.exports);function ch(t,e){return t.length===e.length&&JSON.stringify(t.map((function(t){return t})).sort())===JSON.stringify(e.map((function(t){return t})).sort())}var sh={Polygon:z,LineString:J,Point:W,MultiPolygon:Y,MultiLineString:Y,MultiPoint:Y};var ph=Object.freeze({__proto__:null,CommonSelectors:At,constrainFeatureMovement:Jd,createMidPoint:Pt,createSupplementaryPoints:Ot,createVertex:It,doubleClickZoom:Tt,euclideanDistance:N,featuresAt:F,getFeatureAtAndSetCursors:C,isClick:R,isEventAtCoordinates:Kd,isTap:D,mapEventToBoundingBox:P,ModeHandler:t,moveFeatures:zd,sortFeatures:I,stringSetsAreEqual:ch,StringSet:O,theme:st,toDenseArray:tt}),lh=function(t,e){var r={options:t=function(t){void 0===t&&(t={});var e=at(t);return t.controls||(e.controls={}),!1===t.displayControlsDefault?e.controls=at(oh,t.controls):e.controls=at(nh,t.controls),(e=at(rh,e)).styles=ih(e.styles,"cold").concat(ih(e.styles,"hot")),e}(t)};e=function(t,e){return e.modes=d,e.getFeatureIdsAt=function(e){return F.click({point:e},null,t).map((function(t){return t.properties.id}))},e.getSelectedIds=function(){return t.store.getSelectedIds()},e.getSelected=function(){return{type:y.FEATURE_COLLECTION,features:t.store.getSelectedIds().map((function(e){return t.store.get(e)})).map((function(t){return t.toGeoJSON()}))}},e.getSelectedPoints=function(){return{type:y.FEATURE_COLLECTION,features:t.store.getSelectedCoordinates().map((function(t){return{type:y.FEATURE,properties:{},geometry:{type:y.POINT,coordinates:t.coordinates}}}))}},e.set=function(r){if(void 0===r.type||r.type!==y.FEATURE_COLLECTION||!Array.isArray(r.features))throw new Error("Invalid FeatureCollection");var n=t.store.createRenderBatch(),o=t.store.getAllIds().slice(),i=e.add(r),a=new O(i);return(o=o.filter((function(t){return!a.has(t)}))).length&&e.delete(o),n(),i},e.add=function(e){var r=JSON.parse(JSON.stringify(Nt(e))).features.map((function(e){if(e.id=e.id||$(),null===e.geometry)throw new Error("Invalid geometry: null");if(void 0===t.store.get(e.id)||t.store.get(e.id).type!==e.geometry.type){var r=sh[e.geometry.type];if(void 0===r)throw new Error("Invalid geometry type: "+e.geometry.type+".");var n=new r(t,e);t.store.add(n)}else{var o=t.store.get(e.id);o.properties=e.properties,uh(o.properties,e.properties)||t.store.featureChanged(o.id),uh(o.getCoordinates(),e.geometry.coordinates)||o.incomingCoords(e.geometry.coordinates)}return e.id}));return t.store.render(),r},e.get=function(e){var r=t.store.get(e);if(r)return r.toGeoJSON()},e.getAll=function(){return{type:y.FEATURE_COLLECTION,features:t.store.getAll().map((function(t){return t.toGeoJSON()}))}},e.delete=function(r){return t.store.delete(r,{silent:!0}),e.getMode()!==d.DIRECT_SELECT||t.store.getSelectedIds().length?t.store.render():t.events.changeMode(d.SIMPLE_SELECT,void 0,{silent:!0}),e},e.deleteAll=function(){return t.store.delete(t.store.getAllIds(),{silent:!0}),e.getMode()===d.DIRECT_SELECT?t.events.changeMode(d.SIMPLE_SELECT,void 0,{silent:!0}):t.store.render(),e},e.changeMode=function(r,n){return void 0===n&&(n={}),r===d.SIMPLE_SELECT&&e.getMode()===d.SIMPLE_SELECT?(ch(n.featureIds||[],t.store.getSelectedIds())||(t.store.setSelected(n.featureIds,{silent:!0}),t.store.render()),e):(r===d.DIRECT_SELECT&&e.getMode()===d.DIRECT_SELECT&&n.featureId===t.store.getSelectedIds()[0]||t.events.changeMode(r,n,{silent:!0}),e)},e.getMode=function(){return t.events.getMode()},e.trash=function(){return t.events.trash({silent:!0}),e},e.combineFeatures=function(){return t.events.combineFeatures({silent:!0}),e},e.uncombineFeatures=function(){return t.events.uncombineFeatures({silent:!0}),e},e.setFeatureProperty=function(r,n,o){return t.store.setFeatureProperty(r,n,o),e},e}(r,e),r.api=e;var n=ct(r);return e.onAdd=n.onAdd,e.onRemove=n.onRemove,e.types=f,e.options=t,e.ctx=r,e};function fh(t){lh(t,this)}return fh.modes=eh,fh.constants=E,fh.lib=ph,fh}));
//# sourceMappingURL=mapbox-gl-draw.js.map
